var __create=Object.create;var __getProtoOf=Object.getPrototypeOf;var __defProp=Object.defineProperty;var __getOwnPropNames=Object.getOwnPropertyNames;var __hasOwnProp=Object.prototype.hasOwnProperty;var __toESM=(mod,isNodeMode,target)=>{target=mod!=null?__create(__getProtoOf(mod)):{};const to=isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:true}):target;for(let key of __getOwnPropNames(mod))if(!__hasOwnProp.call(to,key))__defProp(to,key,{get:()=>mod[key],enumerable:true});return to};var __commonJS=(cb,mod)=>()=>(mod||cb((mod={exports:{}}).exports,mod),mod.exports);var __export=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:true,configurable:true,set:(newValue)=>all[name]=()=>newValue})};var require_boolbase=__commonJS((exports,module)=>{module.exports={trueFunc:function trueFunc(){return true},falseFunc:function falseFunc(){return false}}});var boolbase6=__toESM(require_boolbase(),1);var SelectorType;(function(SelectorType2){SelectorType2["Attribute"]="attribute";SelectorType2["Pseudo"]="pseudo";SelectorType2["PseudoElement"]="pseudo-element";SelectorType2["Tag"]="tag";SelectorType2["Universal"]="universal";SelectorType2["Adjacent"]="adjacent";SelectorType2["Child"]="child";SelectorType2["Descendant"]="descendant";SelectorType2["Parent"]="parent";SelectorType2["Sibling"]="sibling";SelectorType2["ColumnCombinator"]="column-combinator"})(SelectorType||(SelectorType={}));var AttributeAction;(function(AttributeAction2){AttributeAction2["Any"]="any";AttributeAction2["Element"]="element";AttributeAction2["End"]="end";AttributeAction2["Equals"]="equals";AttributeAction2["Exists"]="exists";AttributeAction2["Hyphen"]="hyphen";AttributeAction2["Not"]="not";AttributeAction2["Start"]="start"})(AttributeAction||(AttributeAction={}));var reName=/^[^#\\]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\u00B0-\uFFFF-])+/;var reEscape=/\\([\da-f]{1,6}\s?|(\s)|.)/gi;var CharCode;(function(CharCode2){CharCode2[CharCode2["LeftParenthesis"]=40]="LeftParenthesis";CharCode2[CharCode2["RightParenthesis"]=41]="RightParenthesis";CharCode2[CharCode2["LeftSquareBracket"]=91]="LeftSquareBracket";CharCode2[CharCode2["RightSquareBracket"]=93]="RightSquareBracket";CharCode2[CharCode2["Comma"]=44]="Comma";CharCode2[CharCode2["Period"]=46]="Period";CharCode2[CharCode2["Colon"]=58]="Colon";CharCode2[CharCode2["SingleQuote"]=39]="SingleQuote";CharCode2[CharCode2["DoubleQuote"]=34]="DoubleQuote";CharCode2[CharCode2["Plus"]=43]="Plus";CharCode2[CharCode2["Tilde"]=126]="Tilde";CharCode2[CharCode2["QuestionMark"]=63]="QuestionMark";CharCode2[CharCode2["ExclamationMark"]=33]="ExclamationMark";CharCode2[CharCode2["Slash"]=47]="Slash";CharCode2[CharCode2["Equal"]=61]="Equal";CharCode2[CharCode2["Dollar"]=36]="Dollar";CharCode2[CharCode2["Pipe"]=124]="Pipe";CharCode2[CharCode2["Circumflex"]=94]="Circumflex";CharCode2[CharCode2["Asterisk"]=42]="Asterisk";CharCode2[CharCode2["GreaterThan"]=62]="GreaterThan";CharCode2[CharCode2["LessThan"]=60]="LessThan";CharCode2[CharCode2["Hash"]=35]="Hash";CharCode2[CharCode2["LowerI"]=105]="LowerI";CharCode2[CharCode2["LowerS"]=115]="LowerS";CharCode2[CharCode2["BackSlash"]=92]="BackSlash";CharCode2[CharCode2["Space"]=32]="Space";CharCode2[CharCode2["Tab"]=9]="Tab";CharCode2[CharCode2["NewLine"]=10]="NewLine";CharCode2[CharCode2["FormFeed"]=12]="FormFeed";CharCode2[CharCode2["CarriageReturn"]=13]="CarriageReturn"})(CharCode||(CharCode={}));var actionTypes=new Map([[CharCode.Tilde,AttributeAction.Element],[CharCode.Circumflex,AttributeAction.Start],[CharCode.Dollar,AttributeAction.End],[CharCode.Asterisk,AttributeAction.Any],[CharCode.ExclamationMark,AttributeAction.Not],[CharCode.Pipe,AttributeAction.Hyphen]]);var unpackPseudos=new Set(["has","not","matches","is","where","host","host-context"]);var pseudosToPseudoElements=new Set(["before","after","first-line","first-letter"]);function isTraversal(selector){switch(selector.type){case SelectorType.Adjacent:case SelectorType.Child:case SelectorType.Descendant:case SelectorType.Parent:case SelectorType.Sibling:case SelectorType.ColumnCombinator:{return true}default:{return false}}}var stripQuotesFromPseudos=new Set(["contains","icontains"]);function funescape(_,escaped,escapedWhitespace){const high=Number.parseInt(escaped,16)-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)}function unescapeCSS(cssString){return cssString.replace(reEscape,funescape)}function isQuote(c){return c===CharCode.SingleQuote||c===CharCode.DoubleQuote}function isWhitespace(c){return c===CharCode.Space||c===CharCode.Tab||c===CharCode.NewLine||c===CharCode.FormFeed||c===CharCode.CarriageReturn}function parse(selector){const subselects=[];const endIndex=parseSelector(subselects,`${selector}`,0);if(endIndex<selector.length){throw new Error(`Unmatched selector: ${selector.slice(endIndex)}`)}return subselects}function parseSelector(subselects,selector,selectorIndex){let tokens=[];function getName(offset){const match=selector.slice(selectorIndex+offset).match(reName);if(!match){throw new Error(`Expected name, found ${selector.slice(selectorIndex)}`)}const[name]=match;selectorIndex+=offset+name.length;return unescapeCSS(name)}function stripWhitespace(offset){selectorIndex+=offset;while(selectorIndex<selector.length&&isWhitespace(selector.charCodeAt(selectorIndex))){selectorIndex++}}function readValueWithParenthesis(){selectorIndex+=1;const start=selectorIndex;for(let counter=1;selectorIndex<selector.length;selectorIndex++){switch(selector.charCodeAt(selectorIndex)){case CharCode.BackSlash:{selectorIndex+=1;break}case CharCode.LeftParenthesis:{counter+=1;break}case CharCode.RightParenthesis:{counter-=1;if(counter===0){return unescapeCSS(selector.slice(start,selectorIndex++))}break}}}throw new Error("Parenthesis not matched")}function ensureNotTraversal(){if(tokens.length>0&&isTraversal(tokens[tokens.length-1])){throw new Error("Did not expect successive traversals.")}}function addTraversal(type){if(tokens.length>0&&tokens[tokens.length-1].type===SelectorType.Descendant){tokens[tokens.length-1].type=type;return}ensureNotTraversal();tokens.push({type})}function addSpecialAttribute(name,action){tokens.push({type:SelectorType.Attribute,name,action,value:getName(1),namespace:null,ignoreCase:"quirks"})}function finalizeSubselector(){if(tokens.length>0&&tokens[tokens.length-1].type===SelectorType.Descendant){tokens.pop()}if(tokens.length===0){throw new Error("Empty sub-selector")}subselects.push(tokens)}stripWhitespace(0);if(selector.length===selectorIndex){return selectorIndex}loop:while(selectorIndex<selector.length){const firstChar=selector.charCodeAt(selectorIndex);switch(firstChar){case CharCode.Space:case CharCode.Tab:case CharCode.NewLine:case CharCode.FormFeed:case CharCode.CarriageReturn:{if(tokens.length===0||tokens[0].type!==SelectorType.Descendant){ensureNotTraversal();tokens.push({type:SelectorType.Descendant})}stripWhitespace(1);break}case CharCode.GreaterThan:{addTraversal(SelectorType.Child);stripWhitespace(1);break}case CharCode.LessThan:{addTraversal(SelectorType.Parent);stripWhitespace(1);break}case CharCode.Tilde:{addTraversal(SelectorType.Sibling);stripWhitespace(1);break}case CharCode.Plus:{addTraversal(SelectorType.Adjacent);stripWhitespace(1);break}case CharCode.Period:{addSpecialAttribute("class",AttributeAction.Element);break}case CharCode.Hash:{addSpecialAttribute("id",AttributeAction.Equals);break}case CharCode.LeftSquareBracket:{stripWhitespace(1);let name;let namespace=null;if(selector.charCodeAt(selectorIndex)===CharCode.Pipe){name=getName(1)}else if(selector.startsWith("*|",selectorIndex)){namespace="*";name=getName(2)}else{name=getName(0);if(selector.charCodeAt(selectorIndex)===CharCode.Pipe&&selector.charCodeAt(selectorIndex+1)!==CharCode.Equal){namespace=name;name=getName(1)}}stripWhitespace(0);let action=AttributeAction.Exists;const possibleAction=actionTypes.get(selector.charCodeAt(selectorIndex));if(possibleAction){action=possibleAction;if(selector.charCodeAt(selectorIndex+1)!==CharCode.Equal){throw new Error("Expected `=`")}stripWhitespace(2)}else if(selector.charCodeAt(selectorIndex)===CharCode.Equal){action=AttributeAction.Equals;stripWhitespace(1)}let value="";let ignoreCase=null;if(action!=="exists"){if(isQuote(selector.charCodeAt(selectorIndex))){const quote=selector.charCodeAt(selectorIndex);selectorIndex+=1;const sectionStart=selectorIndex;while(selectorIndex<selector.length&&selector.charCodeAt(selectorIndex)!==quote){selectorIndex+=selector.charCodeAt(selectorIndex)===CharCode.BackSlash?2:1}if(selector.charCodeAt(selectorIndex)!==quote){throw new Error("Attribute value didn't end")}value=unescapeCSS(selector.slice(sectionStart,selectorIndex));selectorIndex+=1}else{const valueStart=selectorIndex;while(selectorIndex<selector.length&&!isWhitespace(selector.charCodeAt(selectorIndex))&&selector.charCodeAt(selectorIndex)!==CharCode.RightSquareBracket){selectorIndex+=selector.charCodeAt(selectorIndex)===CharCode.BackSlash?2:1}value=unescapeCSS(selector.slice(valueStart,selectorIndex))}stripWhitespace(0);switch(selector.charCodeAt(selectorIndex)|32){case CharCode.LowerI:{ignoreCase=true;stripWhitespace(1);break}case CharCode.LowerS:{ignoreCase=false;stripWhitespace(1);break}}}if(selector.charCodeAt(selectorIndex)!==CharCode.RightSquareBracket){throw new Error("Attribute selector didn't terminate")}selectorIndex+=1;const attributeSelector={type:SelectorType.Attribute,name,action,value,namespace,ignoreCase};tokens.push(attributeSelector);break}case CharCode.Colon:{if(selector.charCodeAt(selectorIndex+1)===CharCode.Colon){tokens.push({type:SelectorType.PseudoElement,name:getName(2).toLowerCase(),data:selector.charCodeAt(selectorIndex)===CharCode.LeftParenthesis?readValueWithParenthesis():null});break}const name=getName(1).toLowerCase();if(pseudosToPseudoElements.has(name)){tokens.push({type:SelectorType.PseudoElement,name,data:null});break}let data=null;if(selector.charCodeAt(selectorIndex)===CharCode.LeftParenthesis){if(unpackPseudos.has(name)){if(isQuote(selector.charCodeAt(selectorIndex+1))){throw new Error(`Pseudo-selector ${name} cannot be quoted`)}data=[];selectorIndex=parseSelector(data,selector,selectorIndex+1);if(selector.charCodeAt(selectorIndex)!==CharCode.RightParenthesis){throw new Error(`Missing closing parenthesis in :${name} (${selector})`)}selectorIndex+=1}else{data=readValueWithParenthesis();if(stripQuotesFromPseudos.has(name)){const quot=data.charCodeAt(0);if(quot===data.charCodeAt(data.length-1)&&isQuote(quot)){data=data.slice(1,-1)}}data=unescapeCSS(data)}}tokens.push({type:SelectorType.Pseudo,name,data});break}case CharCode.Comma:{finalizeSubselector();tokens=[];stripWhitespace(1);break}default:{if(selector.startsWith("/*",selectorIndex)){const endIndex=selector.indexOf("*/",selectorIndex+2);if(endIndex<0){throw new Error("Comment was not terminated")}selectorIndex=endIndex+2;if(tokens.length===0){stripWhitespace(0)}break}let namespace=null;let name;if(firstChar===CharCode.Asterisk){selectorIndex+=1;name="*"}else if(firstChar===CharCode.Pipe){name="";if(selector.charCodeAt(selectorIndex+1)===CharCode.Pipe){addTraversal(SelectorType.ColumnCombinator);stripWhitespace(2);break}}else if(reName.test(selector.slice(selectorIndex))){name=getName(0)}else{break loop}if(selector.charCodeAt(selectorIndex)===CharCode.Pipe&&selector.charCodeAt(selectorIndex+1)!==CharCode.Pipe){namespace=name;if(selector.charCodeAt(selectorIndex+1)===CharCode.Asterisk){name="*";selectorIndex+=2}else{name=getName(1)}}tokens.push(name==="*"?{type:SelectorType.Universal,namespace}:{type:SelectorType.Tag,name,namespace})}}}finalizeSubselector();return selectorIndex}var exports_esm2={};__export(exports_esm2,{uniqueSort:()=>uniqueSort,textContent:()=>textContent,testElement:()=>testElement,replaceElement:()=>replaceElement,removeSubsets:()=>removeSubsets,removeElement:()=>removeElement,prevElementSibling:()=>prevElementSibling,prependChild:()=>prependChild,prepend:()=>prepend,nextElementSibling:()=>nextElementSibling,isText:()=>isText,isTag:()=>isTag2,isDocument:()=>isDocument,isComment:()=>isComment,isCDATA:()=>isCDATA,innerText:()=>innerText,hasChildren:()=>hasChildren,hasAttrib:()=>hasAttrib,getText:()=>getText,getSiblings:()=>getSiblings,getParent:()=>getParent,getOuterHTML:()=>getOuterHTML,getName:()=>getName,getInnerHTML:()=>getInnerHTML,getFeed:()=>getFeed,getElementsByTagType:()=>getElementsByTagType,getElementsByTagName:()=>getElementsByTagName,getElementsByClassName:()=>getElementsByClassName,getElements:()=>getElements,getElementById:()=>getElementById,getChildren:()=>getChildren,getAttributeValue:()=>getAttributeValue,findOneChild:()=>findOneChild,findOne:()=>findOne,findAll:()=>findAll,find:()=>find,filter:()=>filter,existsOne:()=>existsOne,compareDocumentPosition:()=>compareDocumentPosition,appendChild:()=>appendChild,append:()=>append,DocumentPosition:()=>DocumentPosition});var ElementType;(function(ElementType2){ElementType2["Root"]="root";ElementType2["Text"]="text";ElementType2["Directive"]="directive";ElementType2["Comment"]="comment";ElementType2["Script"]="script";ElementType2["Style"]="style";ElementType2["Tag"]="tag";ElementType2["CDATA"]="cdata";ElementType2["Doctype"]="doctype"})(ElementType||(ElementType={}));function isTag(elem){return elem.type===ElementType.Tag||elem.type===ElementType.Script||elem.type===ElementType.Style}var Root=ElementType.Root;var Text=ElementType.Text;var Directive=ElementType.Directive;var Comment=ElementType.Comment;var Script=ElementType.Script;var Style=ElementType.Style;var Tag=ElementType.Tag;var CDATA=ElementType.CDATA;var Doctype=ElementType.Doctype;class Node{constructor(){this.parent=null;this.prev=null;this.next=null;this.startIndex=null;this.endIndex=null}get parentNode(){return this.parent}set parentNode(parent){this.parent=parent}get previousSibling(){return this.prev}set previousSibling(prev){this.prev=prev}get nextSibling(){return this.next}set nextSibling(next){this.next=next}cloneNode(recursive=false){return cloneNode(this,recursive)}}class DataNode extends Node{constructor(data){super();this.data=data}get nodeValue(){return this.data}set nodeValue(data){this.data=data}}class Text2 extends DataNode{constructor(){super(...arguments);this.type=ElementType.Text}get nodeType(){return 3}}class Comment2 extends DataNode{constructor(){super(...arguments);this.type=ElementType.Comment}get nodeType(){return 8}}class ProcessingInstruction extends DataNode{constructor(name,data){super(data);this.name=name;this.type=ElementType.Directive}get nodeType(){return 1}}class NodeWithChildren extends Node{constructor(children){super();this.children=children}get firstChild(){var _a;return(_a=this.children[0])!==null&&_a!==undefined?_a:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(children){this.children=children}}class CDATA2 extends NodeWithChildren{constructor(){super(...arguments);this.type=ElementType.CDATA}get nodeType(){return 4}}class Document extends NodeWithChildren{constructor(){super(...arguments);this.type=ElementType.Root}get nodeType(){return 9}}class Element extends NodeWithChildren{constructor(name,attribs,children=[],type=name==="script"?ElementType.Script:name==="style"?ElementType.Style:ElementType.Tag){super(children);this.name=name;this.attribs=attribs;this.type=type}get nodeType(){return 1}get tagName(){return this.name}set tagName(name){this.name=name}get attributes(){return Object.keys(this.attribs).map((name)=>{var _a,_b;return{name,value:this.attribs[name],namespace:(_a=this["x-attribsNamespace"])===null||_a===undefined?undefined:_a[name],prefix:(_b=this["x-attribsPrefix"])===null||_b===undefined?undefined:_b[name]}})}}function isTag2(node){return isTag(node)}function isCDATA(node){return node.type===ElementType.CDATA}function isText(node){return node.type===ElementType.Text}function isComment(node){return node.type===ElementType.Comment}function isDirective(node){return node.type===ElementType.Directive}function isDocument(node){return node.type===ElementType.Root}function hasChildren(node){return Object.prototype.hasOwnProperty.call(node,"children")}function cloneNode(node,recursive=false){let result;if(isText(node)){result=new Text2(node.data)}else if(isComment(node)){result=new Comment2(node.data)}else if(isTag2(node)){const children=recursive?cloneChildren(node.children):[];const clone=new Element(node.name,{...node.attribs},children);children.forEach((child)=>child.parent=clone);if(node.namespace!=null){clone.namespace=node.namespace}if(node["x-attribsNamespace"]){clone["x-attribsNamespace"]={...node["x-attribsNamespace"]}}if(node["x-attribsPrefix"]){clone["x-attribsPrefix"]={...node["x-attribsPrefix"]}}result=clone}else if(isCDATA(node)){const children=recursive?cloneChildren(node.children):[];const clone=new CDATA2(children);children.forEach((child)=>child.parent=clone);result=clone}else if(isDocument(node)){const children=recursive?cloneChildren(node.children):[];const clone=new Document(children);children.forEach((child)=>child.parent=clone);if(node["x-mode"]){clone["x-mode"]=node["x-mode"]}result=clone}else if(isDirective(node)){const instruction=new ProcessingInstruction(node.name,node.data);if(node["x-name"]!=null){instruction["x-name"]=node["x-name"];instruction["x-publicId"]=node["x-publicId"];instruction["x-systemId"]=node["x-systemId"]}result=instruction}else{throw new Error(`Not implemented yet: ${node.type}`)}result.startIndex=node.startIndex;result.endIndex=node.endIndex;if(node.sourceCodeLocation!=null){result.sourceCodeLocation=node.sourceCodeLocation}return result}function cloneChildren(childs){const children=childs.map((child)=>cloneNode(child,true));for(let i=1;i<children.length;i++){children[i].prev=children[i-1];children[i-1].next=children[i]}return children}var defaultOpts={withStartIndices:false,withEndIndices:false,xmlMode:false};class DomHandler{constructor(callback,options,elementCB){this.dom=[];this.root=new Document(this.dom);this.done=false;this.tagStack=[this.root];this.lastNode=null;this.parser=null;if(typeof options==="function"){elementCB=options;options=defaultOpts}if(typeof callback==="object"){options=callback;callback=undefined}this.callback=callback!==null&&callback!==undefined?callback:null;this.options=options!==null&&options!==undefined?options:defaultOpts;this.elementCB=elementCB!==null&&elementCB!==undefined?elementCB:null}onparserinit(parser){this.parser=parser}onreset(){this.dom=[];this.root=new Document(this.dom);this.done=false;this.tagStack=[this.root];this.lastNode=null;this.parser=null}onend(){if(this.done)return;this.done=true;this.parser=null;this.handleCallback(null)}onerror(error){this.handleCallback(error)}onclosetag(){this.lastNode=null;const elem=this.tagStack.pop();if(this.options.withEndIndices){elem.endIndex=this.parser.endIndex}if(this.elementCB)this.elementCB(elem)}onopentag(name,attribs){const type=this.options.xmlMode?ElementType.Tag:undefined;const element=new Element(name,attribs,undefined,type);this.addNode(element);this.tagStack.push(element)}ontext(data){const{lastNode}=this;if(lastNode&&lastNode.type===ElementType.Text){lastNode.data+=data;if(this.options.withEndIndices){lastNode.endIndex=this.parser.endIndex}}else{const node2=new Text2(data);this.addNode(node2);this.lastNode=node2}}oncomment(data){if(this.lastNode&&this.lastNode.type===ElementType.Comment){this.lastNode.data+=data;return}const node2=new Comment2(data);this.addNode(node2);this.lastNode=node2}oncommentend(){this.lastNode=null}oncdatastart(){const text=new Text2("");const node2=new CDATA2([text]);this.addNode(node2);text.parent=node2;this.lastNode=text}oncdataend(){this.lastNode=null}onprocessinginstruction(name,data){const node2=new ProcessingInstruction(name,data);this.addNode(node2)}handleCallback(error){if(typeof this.callback==="function"){this.callback(error,this.dom)}else if(error){throw error}}addNode(node2){const parent=this.tagStack[this.tagStack.length-1];const previousSibling=parent.children[parent.children.length-1];if(this.options.withStartIndices){node2.startIndex=this.parser.startIndex}if(this.options.withEndIndices){node2.endIndex=this.parser.endIndex}parent.children.push(node2);if(previousSibling){node2.prev=previousSibling;previousSibling.next=node2}node2.parent=parent;this.lastNode=null}}var xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var xmlCodeMap=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);var getCodePoint=String.prototype.codePointAt!=null?(str,index)=>str.codePointAt(index):(c,index)=>(c.charCodeAt(index)&64512)===55296?(c.charCodeAt(index)-55296)*1024+c.charCodeAt(index+1)-56320+65536:c.charCodeAt(index);function encodeXML(str){let ret="";let lastIdx=0;let match;while((match=xmlReplacer.exec(str))!==null){const i=match.index;const char=str.charCodeAt(i);const next=xmlCodeMap.get(char);if(next!==undefined){ret+=str.substring(lastIdx,i)+next;lastIdx=i+1}else{ret+=`${str.substring(lastIdx,i)}&#x${getCodePoint(str,i).toString(16)};`;lastIdx=xmlReplacer.lastIndex+=Number((char&64512)===55296)}}return ret+str.substr(lastIdx)}function getEscaper(regex,map){return function escape(data){let match;let lastIdx=0;let result="";while(match=regex.exec(data)){if(lastIdx!==match.index){result+=data.substring(lastIdx,match.index)}result+=map.get(match[0].charCodeAt(0));lastIdx=match.index+1}return result+data.substring(lastIdx)}}var escapeUTF8=getEscaper(/[&<>'"]/g,xmlCodeMap);var escapeAttribute=getEscaper(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]]));var escapeText=getEscaper(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]));var EntityLevel;(function(EntityLevel2){EntityLevel2[EntityLevel2["XML"]=0]="XML";EntityLevel2[EntityLevel2["HTML"]=1]="HTML"})(EntityLevel||(EntityLevel={}));var EncodingMode;(function(EncodingMode2){EncodingMode2[EncodingMode2["UTF8"]=0]="UTF8";EncodingMode2[EncodingMode2["ASCII"]=1]="ASCII";EncodingMode2[EncodingMode2["Extensive"]=2]="Extensive";EncodingMode2[EncodingMode2["Attribute"]=3]="Attribute";EncodingMode2[EncodingMode2["Text"]=4]="Text"})(EncodingMode||(EncodingMode={}));var elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((val)=>[val.toLowerCase(),val]));var attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((val)=>[val.toLowerCase(),val]));var unencodedElements=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function replaceQuotes(value){return value.replace(/"/g,"&quot;")}function formatAttributes(attributes,opts){var _a;if(!attributes)return;const encode=((_a=opts.encodeEntities)!==null&&_a!==undefined?_a:opts.decodeEntities)===false?replaceQuotes:opts.xmlMode||opts.encodeEntities!=="utf8"?encodeXML:escapeAttribute;return Object.keys(attributes).map((key)=>{var _a2,_b;const value=(_a2=attributes[key])!==null&&_a2!==undefined?_a2:"";if(opts.xmlMode==="foreign"){key=(_b=attributeNames.get(key))!==null&&_b!==undefined?_b:key}if(!opts.emptyAttrs&&!opts.xmlMode&&value===""){return key}return`${key}="${encode(value)}"`}).join(" ")}var singleTag=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function render(node2,options={}){const nodes="length"in node2?node2:[node2];let output="";for(let i=0;i<nodes.length;i++){output+=renderNode(nodes[i],options)}return output}var esm_default=render;function renderNode(node2,options){switch(node2.type){case Root:return render(node2.children,options);case Doctype:case Directive:return renderDirective(node2);case Comment:return renderComment(node2);case CDATA:return renderCdata(node2);case Script:case Style:case Tag:return renderTag(node2,options);case Text:return renderText(node2,options)}}var foreignModeIntegrationPoints=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]);var foreignElements=new Set(["svg","math"]);function renderTag(elem,opts){var _a;if(opts.xmlMode==="foreign"){elem.name=(_a=elementNames.get(elem.name))!==null&&_a!==undefined?_a:elem.name;if(elem.parent&&foreignModeIntegrationPoints.has(elem.parent.name)){opts={...opts,xmlMode:false}}}if(!opts.xmlMode&&foreignElements.has(elem.name)){opts={...opts,xmlMode:"foreign"}}let tag=`<${elem.name}`;const attribs=formatAttributes(elem.attribs,opts);if(attribs){tag+=` ${attribs}`}if(elem.children.length===0&&(opts.xmlMode?opts.selfClosingTags!==false:opts.selfClosingTags&&singleTag.has(elem.name))){if(!opts.xmlMode)tag+=" ";tag+="/>"}else{tag+=">";if(elem.children.length>0){tag+=render(elem.children,opts)}if(opts.xmlMode||!singleTag.has(elem.name)){tag+=`</${elem.name}>`}}return tag}function renderDirective(elem){return`<${elem.data}>`}function renderText(elem,opts){var _a;let data=elem.data||"";if(((_a=opts.encodeEntities)!==null&&_a!==undefined?_a:opts.decodeEntities)!==false&&!(!opts.xmlMode&&elem.parent&&unencodedElements.has(elem.parent.name))){data=opts.xmlMode||opts.encodeEntities!=="utf8"?encodeXML(data):escapeText(data)}return data}function renderCdata(elem){return`<![CDATA[${elem.children[0].data}]]>`}function renderComment(elem){return`<!--${elem.data}-->`}function getOuterHTML(node2,options){return esm_default(node2,options)}function getInnerHTML(node2,options){return hasChildren(node2)?node2.children.map((node3)=>getOuterHTML(node3,options)).join(""):""}function getText(node2){if(Array.isArray(node2))return node2.map(getText).join("");if(isTag2(node2))return node2.name==="br"?`
`:getText(node2.children);if(isCDATA(node2))return getText(node2.children);if(isText(node2))return node2.data;return""}function textContent(node2){if(Array.isArray(node2))return node2.map(textContent).join("");if(hasChildren(node2)&&!isComment(node2)){return textContent(node2.children)}if(isText(node2))return node2.data;return""}function innerText(node2){if(Array.isArray(node2))return node2.map(innerText).join("");if(hasChildren(node2)&&(node2.type===ElementType.Tag||isCDATA(node2))){return innerText(node2.children)}if(isText(node2))return node2.data;return""}function getChildren(elem){return hasChildren(elem)?elem.children:[]}function getParent(elem){return elem.parent||null}function getSiblings(elem){const parent=getParent(elem);if(parent!=null)return getChildren(parent);const siblings=[elem];let{prev,next}=elem;while(prev!=null){siblings.unshift(prev);({prev}=prev)}while(next!=null){siblings.push(next);({next}=next)}return siblings}function getAttributeValue(elem,name){var _a;return(_a=elem.attribs)===null||_a===undefined?undefined:_a[name]}function hasAttrib(elem,name){return elem.attribs!=null&&Object.prototype.hasOwnProperty.call(elem.attribs,name)&&elem.attribs[name]!=null}function getName(elem){return elem.name}function nextElementSibling(elem){let{next}=elem;while(next!==null&&!isTag2(next))({next}=next);return next}function prevElementSibling(elem){let{prev}=elem;while(prev!==null&&!isTag2(prev))({prev}=prev);return prev}function removeElement(elem){if(elem.prev)elem.prev.next=elem.next;if(elem.next)elem.next.prev=elem.prev;if(elem.parent){const childs=elem.parent.children;const childsIndex=childs.lastIndexOf(elem);if(childsIndex>=0){childs.splice(childsIndex,1)}}elem.next=null;elem.prev=null;elem.parent=null}function replaceElement(elem,replacement){const prev=replacement.prev=elem.prev;if(prev){prev.next=replacement}const next=replacement.next=elem.next;if(next){next.prev=replacement}const parent=replacement.parent=elem.parent;if(parent){const childs=parent.children;childs[childs.lastIndexOf(elem)]=replacement;elem.parent=null}}function appendChild(parent,child){removeElement(child);child.next=null;child.parent=parent;if(parent.children.push(child)>1){const sibling=parent.children[parent.children.length-2];sibling.next=child;child.prev=sibling}else{child.prev=null}}function append(elem,next){removeElement(next);const{parent}=elem;const currNext=elem.next;next.next=currNext;next.prev=elem;elem.next=next;next.parent=parent;if(currNext){currNext.prev=next;if(parent){const childs=parent.children;childs.splice(childs.lastIndexOf(currNext),0,next)}}else if(parent){parent.children.push(next)}}function prependChild(parent,child){removeElement(child);child.parent=parent;child.prev=null;if(parent.children.unshift(child)!==1){const sibling=parent.children[1];sibling.prev=child;child.next=sibling}else{child.next=null}}function prepend(elem,prev){removeElement(prev);const{parent}=elem;if(parent){const childs=parent.children;childs.splice(childs.indexOf(elem),0,prev)}if(elem.prev){elem.prev.next=prev}prev.parent=parent;prev.prev=elem.prev;prev.next=elem;elem.prev=prev}function filter(test,node2,recurse=true,limit=Infinity){return find(test,Array.isArray(node2)?node2:[node2],recurse,limit)}function find(test,nodes,recurse,limit){const result=[];const nodeStack=[Array.isArray(nodes)?nodes:[nodes]];const indexStack=[0];for(;;){if(indexStack[0]>=nodeStack[0].length){if(indexStack.length===1){return result}nodeStack.shift();indexStack.shift();continue}const elem=nodeStack[0][indexStack[0]++];if(test(elem)){result.push(elem);if(--limit<=0)return result}if(recurse&&hasChildren(elem)&&elem.children.length>0){indexStack.unshift(0);nodeStack.unshift(elem.children)}}}function findOneChild(test,nodes){return nodes.find(test)}function findOne(test,nodes,recurse=true){const searchedNodes=Array.isArray(nodes)?nodes:[nodes];for(let i=0;i<searchedNodes.length;i++){const node2=searchedNodes[i];if(isTag2(node2)&&test(node2)){return node2}if(recurse&&hasChildren(node2)&&node2.children.length>0){const found=findOne(test,node2.children,true);if(found)return found}}return null}function existsOne(test,nodes){return(Array.isArray(nodes)?nodes:[nodes]).some((node2)=>isTag2(node2)&&test(node2)||hasChildren(node2)&&existsOne(test,node2.children))}function findAll(test,nodes){const result=[];const nodeStack=[Array.isArray(nodes)?nodes:[nodes]];const indexStack=[0];for(;;){if(indexStack[0]>=nodeStack[0].length){if(nodeStack.length===1){return result}nodeStack.shift();indexStack.shift();continue}const elem=nodeStack[0][indexStack[0]++];if(isTag2(elem)&&test(elem))result.push(elem);if(hasChildren(elem)&&elem.children.length>0){indexStack.unshift(0);nodeStack.unshift(elem.children)}}}var Checks={tag_name(name){if(typeof name==="function"){return(elem)=>isTag2(elem)&&name(elem.name)}else if(name==="*"){return isTag2}return(elem)=>isTag2(elem)&&elem.name===name},tag_type(type){if(typeof type==="function"){return(elem)=>type(elem.type)}return(elem)=>elem.type===type},tag_contains(data){if(typeof data==="function"){return(elem)=>isText(elem)&&data(elem.data)}return(elem)=>isText(elem)&&elem.data===data}};function getAttribCheck(attrib,value){if(typeof value==="function"){return(elem)=>isTag2(elem)&&value(elem.attribs[attrib])}return(elem)=>isTag2(elem)&&elem.attribs[attrib]===value}function combineFuncs(a,b){return(elem)=>a(elem)||b(elem)}function compileTest(options){const funcs=Object.keys(options).map((key)=>{const value=options[key];return Object.prototype.hasOwnProperty.call(Checks,key)?Checks[key](value):getAttribCheck(key,value)});return funcs.length===0?null:funcs.reduce(combineFuncs)}function testElement(options,node2){const test=compileTest(options);return test?test(node2):true}function getElements(options,nodes,recurse,limit=Infinity){const test=compileTest(options);return test?filter(test,nodes,recurse,limit):[]}function getElementById(id,nodes,recurse=true){if(!Array.isArray(nodes))nodes=[nodes];return findOne(getAttribCheck("id",id),nodes,recurse)}function getElementsByTagName(tagName,nodes,recurse=true,limit=Infinity){return filter(Checks["tag_name"](tagName),nodes,recurse,limit)}function getElementsByClassName(className,nodes,recurse=true,limit=Infinity){return filter(getAttribCheck("class",className),nodes,recurse,limit)}function getElementsByTagType(type,nodes,recurse=true,limit=Infinity){return filter(Checks["tag_type"](type),nodes,recurse,limit)}function removeSubsets(nodes){let idx=nodes.length;while(--idx>=0){const node2=nodes[idx];if(idx>0&&nodes.lastIndexOf(node2,idx-1)>=0){nodes.splice(idx,1);continue}for(let ancestor=node2.parent;ancestor;ancestor=ancestor.parent){if(nodes.includes(ancestor)){nodes.splice(idx,1);break}}}return nodes}var DocumentPosition;(function(DocumentPosition2){DocumentPosition2[DocumentPosition2["DISCONNECTED"]=1]="DISCONNECTED";DocumentPosition2[DocumentPosition2["PRECEDING"]=2]="PRECEDING";DocumentPosition2[DocumentPosition2["FOLLOWING"]=4]="FOLLOWING";DocumentPosition2[DocumentPosition2["CONTAINS"]=8]="CONTAINS";DocumentPosition2[DocumentPosition2["CONTAINED_BY"]=16]="CONTAINED_BY"})(DocumentPosition||(DocumentPosition={}));function compareDocumentPosition(nodeA,nodeB){const aParents=[];const bParents=[];if(nodeA===nodeB){return 0}let current=hasChildren(nodeA)?nodeA:nodeA.parent;while(current){aParents.unshift(current);current=current.parent}current=hasChildren(nodeB)?nodeB:nodeB.parent;while(current){bParents.unshift(current);current=current.parent}const maxIdx=Math.min(aParents.length,bParents.length);let idx=0;while(idx<maxIdx&&aParents[idx]===bParents[idx]){idx++}if(idx===0){return DocumentPosition.DISCONNECTED}const sharedParent=aParents[idx-1];const siblings=sharedParent.children;const aSibling=aParents[idx];const bSibling=bParents[idx];if(siblings.indexOf(aSibling)>siblings.indexOf(bSibling)){if(sharedParent===nodeB){return DocumentPosition.FOLLOWING|DocumentPosition.CONTAINED_BY}return DocumentPosition.FOLLOWING}if(sharedParent===nodeA){return DocumentPosition.PRECEDING|DocumentPosition.CONTAINS}return DocumentPosition.PRECEDING}function uniqueSort(nodes){nodes=nodes.filter((node2,i,arr)=>!arr.includes(node2,i+1));nodes.sort((a,b)=>{const relative=compareDocumentPosition(a,b);if(relative&DocumentPosition.PRECEDING){return-1}else if(relative&DocumentPosition.FOLLOWING){return 1}return 0});return nodes}function getFeed(doc){const feedRoot=getOneElement(isValidFeed,doc);return!feedRoot?null:feedRoot.name==="feed"?getAtomFeed(feedRoot):getRssFeed(feedRoot)}function getAtomFeed(feedRoot){var _a;const childs=feedRoot.children;const feed={type:"atom",items:getElementsByTagName("entry",childs).map((item)=>{var _a2;const{children}=item;const entry={media:getMediaElements(children)};addConditionally(entry,"id","id",children);addConditionally(entry,"title","title",children);const href2=(_a2=getOneElement("link",children))===null||_a2===undefined?undefined:_a2.attribs["href"];if(href2){entry.link=href2}const description=fetch("summary",children)||fetch("content",children);if(description){entry.description=description}const pubDate=fetch("updated",children);if(pubDate){entry.pubDate=new Date(pubDate)}return entry})};addConditionally(feed,"id","id",childs);addConditionally(feed,"title","title",childs);const href=(_a=getOneElement("link",childs))===null||_a===undefined?undefined:_a.attribs["href"];if(href){feed.link=href}addConditionally(feed,"description","subtitle",childs);const updated=fetch("updated",childs);if(updated){feed.updated=new Date(updated)}addConditionally(feed,"author","email",childs,true);return feed}function getRssFeed(feedRoot){var _a,_b;const childs=(_b=(_a=getOneElement("channel",feedRoot.children))===null||_a===undefined?undefined:_a.children)!==null&&_b!==undefined?_b:[];const feed={type:feedRoot.name.substr(0,3),id:"",items:getElementsByTagName("item",feedRoot.children).map((item)=>{const{children}=item;const entry={media:getMediaElements(children)};addConditionally(entry,"id","guid",children);addConditionally(entry,"title","title",children);addConditionally(entry,"link","link",children);addConditionally(entry,"description","description",children);const pubDate=fetch("pubDate",children)||fetch("dc:date",children);if(pubDate)entry.pubDate=new Date(pubDate);return entry})};addConditionally(feed,"title","title",childs);addConditionally(feed,"link","link",childs);addConditionally(feed,"description","description",childs);const updated=fetch("lastBuildDate",childs);if(updated){feed.updated=new Date(updated)}addConditionally(feed,"author","managingEditor",childs,true);return feed}var MEDIA_KEYS_STRING=["url","type","lang"];var MEDIA_KEYS_INT=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function getMediaElements(where){return getElementsByTagName("media:content",where).map((elem)=>{const{attribs}=elem;const media={medium:attribs["medium"],isDefault:!!attribs["isDefault"]};for(const attrib of MEDIA_KEYS_STRING){if(attribs[attrib]){media[attrib]=attribs[attrib]}}for(const attrib of MEDIA_KEYS_INT){if(attribs[attrib]){media[attrib]=parseInt(attribs[attrib],10)}}if(attribs["expression"]){media.expression=attribs["expression"]}return media})}function getOneElement(tagName,node2){return getElementsByTagName(tagName,node2,true,1)[0]}function fetch(tagName,where,recurse=false){return textContent(getElementsByTagName(tagName,where,recurse,1)).trim()}function addConditionally(obj,prop,tagName,where,recurse=false){const val=fetch(tagName,where,recurse);if(val)obj[prop]=val}function isValidFeed(value){return value==="rss"||value==="feed"||value==="rdf:RDF"}var boolbase5=__toESM(require_boolbase(),1);var boolbase=__toESM(require_boolbase(),1);var reChars=/[-[\]{}()*+?.,\\^$|#\s]/g;function escapeRegex(value){return value.replace(reChars,"\\$&")}var caseInsensitiveAttributes=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function shouldIgnoreCase(selector,options){return typeof selector.ignoreCase==="boolean"?selector.ignoreCase:selector.ignoreCase==="quirks"?!!options.quirksMode:!options.xmlMode&&caseInsensitiveAttributes.has(selector.name)}var attributeRules={equals(next,data,options){const{adapter}=options;const{name}=data;let{value}=data;if(shouldIgnoreCase(data,options)){value=value.toLowerCase();return(elem)=>{const attr=adapter.getAttributeValue(elem,name);return attr!=null&&attr.length===value.length&&attr.toLowerCase()===value&&next(elem)}}return(elem)=>adapter.getAttributeValue(elem,name)===value&&next(elem)},hyphen(next,data,options){const{adapter}=options;const{name}=data;let{value}=data;const len=value.length;if(shouldIgnoreCase(data,options)){value=value.toLowerCase();return function hyphenIC(elem){const attr=adapter.getAttributeValue(elem,name);return attr!=null&&(attr.length===len||attr.charAt(len)==="-")&&attr.substr(0,len).toLowerCase()===value&&next(elem)}}return function hyphen(elem){const attr=adapter.getAttributeValue(elem,name);return attr!=null&&(attr.length===len||attr.charAt(len)==="-")&&attr.substr(0,len)===value&&next(elem)}},element(next,data,options){const{adapter}=options;const{name,value}=data;if(/\s/.test(value)){return boolbase.falseFunc}const regex=new RegExp(`(?:^|\\s)${escapeRegex(value)}(?:$|\\s)`,shouldIgnoreCase(data,options)?"i":"");return function element(elem){const attr=adapter.getAttributeValue(elem,name);return attr!=null&&attr.length>=value.length&&regex.test(attr)&&next(elem)}},exists(next,{name},{adapter}){return(elem)=>adapter.hasAttrib(elem,name)&&next(elem)},start(next,data,options){const{adapter}=options;const{name}=data;let{value}=data;const len=value.length;if(len===0){return boolbase.falseFunc}if(shouldIgnoreCase(data,options)){value=value.toLowerCase();return(elem)=>{const attr=adapter.getAttributeValue(elem,name);return attr!=null&&attr.length>=len&&attr.substr(0,len).toLowerCase()===value&&next(elem)}}return(elem)=>!!adapter.getAttributeValue(elem,name)?.startsWith(value)&&next(elem)},end(next,data,options){const{adapter}=options;const{name}=data;let{value}=data;const len=-value.length;if(len===0){return boolbase.falseFunc}if(shouldIgnoreCase(data,options)){value=value.toLowerCase();return(elem)=>adapter.getAttributeValue(elem,name)?.substr(len).toLowerCase()===value&&next(elem)}return(elem)=>!!adapter.getAttributeValue(elem,name)?.endsWith(value)&&next(elem)},any(next,data,options){const{adapter}=options;const{name,value}=data;if(value===""){return boolbase.falseFunc}if(shouldIgnoreCase(data,options)){const regex=new RegExp(escapeRegex(value),"i");return function anyIC(elem){const attr=adapter.getAttributeValue(elem,name);return attr!=null&&attr.length>=value.length&&regex.test(attr)&&next(elem)}}return(elem)=>!!adapter.getAttributeValue(elem,name)?.includes(value)&&next(elem)},not(next,data,options){const{adapter}=options;const{name}=data;let{value}=data;if(value===""){return(elem)=>!!adapter.getAttributeValue(elem,name)&&next(elem)}if(shouldIgnoreCase(data,options)){value=value.toLowerCase();return(elem)=>{const attr=adapter.getAttributeValue(elem,name);return(attr==null||attr.length!==value.length||attr.toLowerCase()!==value)&&next(elem)}}return(elem)=>adapter.getAttributeValue(elem,name)!==value&&next(elem)}};function findAll2(query,elems,options){const{adapter,xmlMode=false}=options;const result=[];const nodeStack=[elems];const indexStack=[0];for(;;){if(indexStack[0]>=nodeStack[0].length){if(nodeStack.length===1){return result}nodeStack.shift();indexStack.shift();continue}const elem=nodeStack[0][indexStack[0]++];if(!adapter.isTag(elem)){continue}if(query(elem)){result.push(elem)}if(xmlMode||adapter.getName(elem)!=="template"){const children=adapter.getChildren(elem);if(children.length>0){nodeStack.unshift(children);indexStack.unshift(0)}}}}function findOne2(query,elems,options){const{adapter,xmlMode=false}=options;const nodeStack=[elems];const indexStack=[0];for(;;){if(indexStack[0]>=nodeStack[0].length){if(nodeStack.length===1){return null}nodeStack.shift();indexStack.shift();continue}const elem=nodeStack[0][indexStack[0]++];if(!adapter.isTag(elem)){continue}if(query(elem)){return elem}if(xmlMode||adapter.getName(elem)!=="template"){const children=adapter.getChildren(elem);if(children.length>0){nodeStack.unshift(children);indexStack.unshift(0)}}}}function getNextSiblings(elem,adapter){const siblings=adapter.getSiblings(elem);if(siblings.length<=1){return[]}const elemIndex=siblings.indexOf(elem);if(elemIndex<0||elemIndex===siblings.length-1){return[]}return siblings.slice(elemIndex+1).filter(adapter.isTag)}function getElementParent(node2,adapter){const parent=adapter.getParent(node2);return parent!=null&&adapter.isTag(parent)?parent:null}var textControl="input:is([type=text i],[type=search i],[type=url i],[type=tel i],[type=email i],[type=password i],[type=date i],[type=month i],[type=week i],[type=time i],[type=datetime-local i],[type=number i])";var aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], :selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])","read-only":`[readonly]:is(textarea, ${textControl})`,"read-write":`:not([readonly]):is(textarea, ${textControl})`,selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"};var boolbase3=__toESM(require_boolbase(),1);var whitespace=new Set([9,10,12,13,32]);var ZERO=48;var NINE=57;function parse2(formula){formula=formula.trim().toLowerCase();if(formula==="even"){return[2,0]}else if(formula==="odd"){return[2,1]}let idx=0;let a=0;let sign=readSign();let number=readNumber();if(idx<formula.length&&formula.charAt(idx)==="n"){idx++;a=sign*(number!==null&&number!==undefined?number:1);skipWhitespace();if(idx<formula.length){sign=readSign();skipWhitespace();number=readNumber()}else{sign=number=0}}if(number===null||idx<formula.length){throw new Error(`n-th rule couldn't be parsed ('${formula}')`)}return[a,sign*number];function readSign(){if(formula.charAt(idx)==="-"){idx++;return-1}if(formula.charAt(idx)==="+"){idx++}return 1}function readNumber(){const start=idx;let value=0;while(idx<formula.length&&formula.charCodeAt(idx)>=ZERO&&formula.charCodeAt(idx)<=NINE){value=value*10+(formula.charCodeAt(idx)-ZERO);idx++}return idx===start?null:value}function skipWhitespace(){while(idx<formula.length&&whitespace.has(formula.charCodeAt(idx))){idx++}}}var import_boolbase=__toESM(require_boolbase(),1);function compile(parsed){const a=parsed[0];const b=parsed[1]-1;if(b<0&&a<=0)return import_boolbase.default.falseFunc;if(a===-1)return(index)=>index<=b;if(a===0)return(index)=>index===b;if(a===1)return b<0?import_boolbase.default.trueFunc:(index)=>index>=b;const absA=Math.abs(a);const bMod=(b%absA+absA)%absA;return a>1?(index)=>index>=b&&index%absA===bMod:(index)=>index<=b&&index%absA===bMod}function nthCheck(formula){return compile(parse2(formula))}function cacheParentResults(next,{adapter,cacheResults},matches){if(cacheResults===false||typeof WeakMap==="undefined"){return(elem)=>next(elem)&&matches(elem)}const resultCache=new WeakMap;function addResultToCache(elem){const result=matches(elem);resultCache.set(elem,result);return result}return function cachedMatcher(elem){if(!next(elem)){return false}if(resultCache.has(elem)){return resultCache.get(elem)}let node2=elem;do{const parent=getElementParent(node2,adapter);if(parent===null){return addResultToCache(elem)}node2=parent}while(!resultCache.has(node2));return resultCache.get(node2)&&addResultToCache(elem)}}var filters={contains(next,text,options){const{getText:getText2}=options.adapter;return cacheParentResults(next,options,(elem)=>getText2(elem).includes(text))},icontains(next,text,options){const itext=text.toLowerCase();const{getText:getText2}=options.adapter;return cacheParentResults(next,options,(elem)=>getText2(elem).toLowerCase().includes(itext))},"nth-child"(next,rule,{adapter,equals}){const func=nthCheck(rule);if(func===boolbase3.falseFunc){return boolbase3.falseFunc}if(func===boolbase3.trueFunc){return(elem)=>getElementParent(elem,adapter)!==null&&next(elem)}return function nthChild(elem){const siblings=adapter.getSiblings(elem);let pos=0;for(let i=0;i<siblings.length;i++){if(equals(elem,siblings[i])){break}if(adapter.isTag(siblings[i])){pos++}}return func(pos)&&next(elem)}},"nth-last-child"(next,rule,{adapter,equals}){const func=nthCheck(rule);if(func===boolbase3.falseFunc){return boolbase3.falseFunc}if(func===boolbase3.trueFunc){return(elem)=>getElementParent(elem,adapter)!==null&&next(elem)}return function nthLastChild(elem){const siblings=adapter.getSiblings(elem);let pos=0;for(let i=siblings.length-1;i>=0;i--){if(equals(elem,siblings[i])){break}if(adapter.isTag(siblings[i])){pos++}}return func(pos)&&next(elem)}},"nth-of-type"(next,rule,{adapter,equals}){const func=nthCheck(rule);if(func===boolbase3.falseFunc){return boolbase3.falseFunc}if(func===boolbase3.trueFunc){return(elem)=>getElementParent(elem,adapter)!==null&&next(elem)}return function nthOfType(elem){const siblings=adapter.getSiblings(elem);let pos=0;for(let i=0;i<siblings.length;i++){const currentSibling=siblings[i];if(equals(elem,currentSibling)){break}if(adapter.isTag(currentSibling)&&adapter.getName(currentSibling)===adapter.getName(elem)){pos++}}return func(pos)&&next(elem)}},"nth-last-of-type"(next,rule,{adapter,equals}){const func=nthCheck(rule);if(func===boolbase3.falseFunc){return boolbase3.falseFunc}if(func===boolbase3.trueFunc){return(elem)=>getElementParent(elem,adapter)!==null&&next(elem)}return function nthLastOfType(elem){const siblings=adapter.getSiblings(elem);let pos=0;for(let i=siblings.length-1;i>=0;i--){const currentSibling=siblings[i];if(equals(elem,currentSibling)){break}if(adapter.isTag(currentSibling)&&adapter.getName(currentSibling)===adapter.getName(elem)){pos++}}return func(pos)&&next(elem)}},root(next,_rule,{adapter}){return(elem)=>getElementParent(elem,adapter)===null&&next(elem)},scope(next,rule,options,context){const{equals}=options;if(!context||context.length===0){return filters["root"](next,rule,options)}if(context.length===1){return(elem)=>equals(context[0],elem)&&next(elem)}return(elem)=>context.includes(elem)&&next(elem)},hover:dynamicStatePseudo("isHovered"),visited:dynamicStatePseudo("isVisited"),active:dynamicStatePseudo("isActive")};function dynamicStatePseudo(name){return function dynamicPseudo(next,_rule,{adapter}){const func=adapter[name];if(typeof func!=="function"){return boolbase3.falseFunc}return function active(elem){return func(elem)&&next(elem)}}}var isDocumentWhiteSpace=/^[ \t\r\n]*$/;var pseudos={empty(elem,{adapter}){const children=adapter.getChildren(elem);return children.every((elem2)=>!adapter.isTag(elem2))&&children.every((elem2)=>isDocumentWhiteSpace.test(adapter.getText(elem2)))},"first-child"(elem,{adapter,equals}){if(adapter.prevElementSibling){return adapter.prevElementSibling(elem)==null}const firstChild=adapter.getSiblings(elem).find((elem2)=>adapter.isTag(elem2));return firstChild!=null&&equals(elem,firstChild)},"last-child"(elem,{adapter,equals}){const siblings=adapter.getSiblings(elem);for(let i=siblings.length-1;i>=0;i--){if(equals(elem,siblings[i])){return true}if(adapter.isTag(siblings[i])){break}}return false},"first-of-type"(elem,{adapter,equals}){const siblings=adapter.getSiblings(elem);const elemName=adapter.getName(elem);for(let i=0;i<siblings.length;i++){const currentSibling=siblings[i];if(equals(elem,currentSibling)){return true}if(adapter.isTag(currentSibling)&&adapter.getName(currentSibling)===elemName){break}}return false},"last-of-type"(elem,{adapter,equals}){const siblings=adapter.getSiblings(elem);const elemName=adapter.getName(elem);for(let i=siblings.length-1;i>=0;i--){const currentSibling=siblings[i];if(equals(elem,currentSibling)){return true}if(adapter.isTag(currentSibling)&&adapter.getName(currentSibling)===elemName){break}}return false},"only-of-type"(elem,{adapter,equals}){const elemName=adapter.getName(elem);return adapter.getSiblings(elem).every((sibling)=>equals(elem,sibling)||!adapter.isTag(sibling)||adapter.getName(sibling)!==elemName)},"only-child"(elem,{adapter,equals}){return adapter.getSiblings(elem).every((sibling)=>equals(elem,sibling)||!adapter.isTag(sibling))}};function verifyPseudoArgs(func,name,subselect,argIndex){if(subselect===null){if(func.length>argIndex){throw new Error(`Pseudo-class :${name} requires an argument`)}}else if(func.length===argIndex){throw new Error(`Pseudo-class :${name} doesn't have any arguments`)}}var boolbase4=__toESM(require_boolbase(),1);function isTraversal2(token){return token.type==="_flexibleDescendant"||isTraversal(token)}function sortRules(arr){const ratings=arr.map(getQuality);for(let i=1;i<arr.length;i++){const procNew=ratings[i];if(procNew<0){continue}for(let j=i;j>0&&procNew<ratings[j-1];j--){const token=arr[j];arr[j]=arr[j-1];arr[j-1]=token;ratings[j]=ratings[j-1];ratings[j-1]=procNew}}}function getAttributeQuality(token){switch(token.action){case AttributeAction.Exists:{return 10}case AttributeAction.Equals:{return token.name==="id"?9:8}case AttributeAction.Not:{return 7}case AttributeAction.Start:{return 6}case AttributeAction.End:{return 6}case AttributeAction.Any:{return 5}case AttributeAction.Hyphen:{return 4}case AttributeAction.Element:{return 3}}}function getQuality(token){switch(token.type){case SelectorType.Universal:{return 50}case SelectorType.Tag:{return 30}case SelectorType.Attribute:{return Math.floor(getAttributeQuality(token)/(token.ignoreCase?2:1))}case SelectorType.Pseudo:{return!token.data?3:token.name==="has"||token.name==="contains"||token.name==="icontains"?0:Array.isArray(token.data)?Math.max(0,Math.min(...token.data.map((d)=>Math.min(...d.map(getQuality))))):2}default:{return-1}}}function includesScopePseudo(t){return t.type===SelectorType.Pseudo&&(t.name==="scope"||Array.isArray(t.data)&&t.data.some((data)=>data.some(includesScopePseudo)))}var PLACEHOLDER_ELEMENT={};function hasDependsOnCurrentElement(selector){return selector.some((sel)=>sel.length>0&&(isTraversal2(sel[0])||sel.some(includesScopePseudo)))}function copyOptions(options){return{xmlMode:!!options.xmlMode,lowerCaseAttributeNames:!!options.lowerCaseAttributeNames,lowerCaseTags:!!options.lowerCaseTags,quirksMode:!!options.quirksMode,cacheResults:!!options.cacheResults,pseudos:options.pseudos,adapter:options.adapter,equals:options.equals}}var is=(next,token,options,context,compileToken)=>{const func=compileToken(token,copyOptions(options),context);return func===boolbase4.trueFunc?next:func===boolbase4.falseFunc?boolbase4.falseFunc:(elem)=>func(elem)&&next(elem)};var subselects={is,matches:is,where:is,not(next,token,options,context,compileToken){const func=compileToken(token,copyOptions(options),context);return func===boolbase4.falseFunc?next:func===boolbase4.trueFunc?boolbase4.falseFunc:(elem)=>!func(elem)&&next(elem)},has(next,subselect,options,_context,compileToken){const{adapter}=options;const opts=copyOptions(options);opts.relativeSelector=true;const context=subselect.some((s)=>s.some(isTraversal2))?[PLACEHOLDER_ELEMENT]:undefined;const skipCache=hasDependsOnCurrentElement(subselect);const compiled=compileToken(subselect,opts,context);if(compiled===boolbase4.falseFunc){return boolbase4.falseFunc}if(context&&compiled!==boolbase4.trueFunc){return skipCache?(elem)=>{if(!next(elem)){return false}context[0]=elem;const childs=adapter.getChildren(elem);return findOne2(compiled,compiled.shouldTestNextSiblings?[...childs,...getNextSiblings(elem,adapter)]:childs,options)!==null}:cacheParentResults(next,options,(elem)=>{context[0]=elem;return findOne2(compiled,adapter.getChildren(elem),options)!==null})}const hasOne=(elem)=>findOne2(compiled,adapter.getChildren(elem),options)!==null;return skipCache?(elem)=>next(elem)&&hasOne(elem):cacheParentResults(next,options,hasOne)}};function compilePseudoSelector(next,selector,options,context,compileToken){const{name,data}=selector;if(Array.isArray(data)){if(!(name in subselects)){throw new Error(`Unknown pseudo-class :${name}(${data})`)}return subselects[name](next,data,options,context,compileToken)}const userPseudo=options.pseudos?.[name];const stringPseudo=typeof userPseudo==="string"?userPseudo:aliases[name];if(typeof stringPseudo==="string"){if(data!=null){throw new Error(`Pseudo ${name} doesn't have any arguments`)}const alias=parse(stringPseudo);return subselects["is"](next,alias,options,context,compileToken)}if(typeof userPseudo==="function"){verifyPseudoArgs(userPseudo,name,data,1);return(elem)=>userPseudo(elem,data)&&next(elem)}if(name in filters){return filters[name](next,data,options,context)}if(name in pseudos){const pseudo=pseudos[name];verifyPseudoArgs(pseudo,name,data,2);return(elem)=>pseudo(elem,options,data)&&next(elem)}throw new Error(`Unknown pseudo-class :${name}`)}function compileGeneralSelector(next,selector,options,context,compileToken,hasExpensiveSubselector){const{adapter,equals,cacheResults}=options;switch(selector.type){case SelectorType.PseudoElement:{throw new Error("Pseudo-elements are not supported by css-select")}case SelectorType.ColumnCombinator:{throw new Error("Column combinators are not yet supported by css-select")}case SelectorType.Attribute:{if(selector.namespace!=null){throw new Error("Namespaced attributes are not yet supported by css-select")}if(!options.xmlMode||options.lowerCaseAttributeNames){selector.name=selector.name.toLowerCase()}return attributeRules[selector.action](next,selector,options)}case SelectorType.Pseudo:{return compilePseudoSelector(next,selector,options,context,compileToken)}case SelectorType.Tag:{if(selector.namespace!=null){throw new Error("Namespaced tag names are not yet supported by css-select")}let{name}=selector;if(!options.xmlMode||options.lowerCaseTags){name=name.toLowerCase()}return function tag(elem){return adapter.getName(elem)===name&&next(elem)}}case SelectorType.Descendant:{if(!hasExpensiveSubselector||cacheResults===false||typeof WeakMap==="undefined"){return function descendant(elem){let current=elem;while(current=getElementParent(current,adapter)){if(next(current)){return true}}return false}}const resultCache=new WeakMap;return function cachedDescendant(elem){let current=elem;let result;while(current=getElementParent(current,adapter)){const cached=resultCache.get(current);if(cached===undefined){result??(result={matches:false});result.matches=next(current);resultCache.set(current,result);if(result.matches){return true}}else{if(result){result.matches=cached.matches}return cached.matches}}return false}}case"_flexibleDescendant":{return function flexibleDescendant(elem){let current=elem;do{if(next(current)){return true}current=getElementParent(current,adapter)}while(current);return false}}case SelectorType.Parent:{return function parent(elem){return adapter.getChildren(elem).some((elem2)=>adapter.isTag(elem2)&&next(elem2))}}case SelectorType.Child:{return function child(elem){const parent=getElementParent(elem,adapter);return parent!==null&&next(parent)}}case SelectorType.Sibling:{return function sibling(elem){const siblings=adapter.getSiblings(elem);for(let i=0;i<siblings.length;i++){const currentSibling=siblings[i];if(equals(elem,currentSibling)){break}if(adapter.isTag(currentSibling)&&next(currentSibling)){return true}}return false}}case SelectorType.Adjacent:{if(adapter.prevElementSibling){return function adjacent(elem){const previous=adapter.prevElementSibling(elem);return previous!=null&&next(previous)}}return function adjacent(elem){const siblings=adapter.getSiblings(elem);let lastElement;for(let i=0;i<siblings.length;i++){const currentSibling=siblings[i];if(equals(elem,currentSibling)){break}if(adapter.isTag(currentSibling)){lastElement=currentSibling}}return!!lastElement&&next(lastElement)}}case SelectorType.Universal:{if(selector.namespace!=null&&selector.namespace!=="*"){throw new Error("Namespaced universal selectors are not yet supported by css-select")}return next}}}var DESCENDANT_TOKEN={type:SelectorType.Descendant};var FLEXIBLE_DESCENDANT_TOKEN={type:"_flexibleDescendant"};var SCOPE_TOKEN={type:SelectorType.Pseudo,name:"scope",data:null};function absolutize(token,{adapter},context){const hasContext=!!context?.every((e)=>e===PLACEHOLDER_ELEMENT||adapter.isTag(e)&&getElementParent(e,adapter)!==null);for(const t of token){if(t.length>0&&isTraversal2(t[0])&&t[0].type!==SelectorType.Descendant){}else if(hasContext&&!t.some(includesScopePseudo)){t.unshift(DESCENDANT_TOKEN)}else{continue}t.unshift(SCOPE_TOKEN)}}function compileToken(token,options,ctx){token.forEach(sortRules);const{context=ctx,rootFunc=boolbase5.trueFunc}=options;const isArrayContext=Array.isArray(context);const finalContext=context&&(Array.isArray(context)?context:[context]);if(options.relativeSelector!==false){absolutize(token,options,finalContext)}else if(token.some((t)=>t.length>0&&isTraversal2(t[0]))){throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled")}let shouldTestNextSiblings=false;let query=boolbase5.falseFunc;combineLoop:for(const rules of token){if(rules.length>=2){const[first,second]=rules;if(first.type!==SelectorType.Pseudo||first.name!=="scope"){}else if(isArrayContext&&second.type===SelectorType.Descendant){rules[1]=FLEXIBLE_DESCENDANT_TOKEN}else if(second.type===SelectorType.Adjacent||second.type===SelectorType.Sibling){shouldTestNextSiblings=true}}let next=rootFunc;let hasExpensiveSubselector=false;for(const rule of rules){next=compileGeneralSelector(next,rule,options,finalContext,compileToken,hasExpensiveSubselector);const quality=getQuality(rule);if(quality===0){hasExpensiveSubselector=true}if(next===boolbase5.falseFunc){continue combineLoop}}if(next===rootFunc){return rootFunc}query=query===boolbase5.falseFunc?next:or(query,next)}query.shouldTestNextSiblings=shouldTestNextSiblings;return query}function or(a,b){return(elem)=>a(elem)||b(elem)}var defaultEquals=(a,b)=>a===b;var defaultOptions={adapter:exports_esm2,equals:defaultEquals};function convertOptionFormats(options){const opts=options??defaultOptions;opts.adapter??(opts.adapter=exports_esm2);opts.equals??(opts.equals=opts.adapter?.equals??defaultEquals);return opts}function _compileUnsafe(selector,options,context){return _compileToken(typeof selector==="string"?parse(selector):selector,options,context)}function _compileToken(selector,options,context){return compileToken(selector,convertOptionFormats(options),context)}function getSelectorFunc(searchFunc){return function select(query,elements,options){const opts=convertOptionFormats(options);if(typeof query!=="function"){query=_compileUnsafe(query,opts,elements)}const filteredElements=prepareContext(elements,opts.adapter,query.shouldTestNextSiblings);return searchFunc(query,filteredElements,opts)}}function prepareContext(elems,adapter,shouldTestNextSiblings=false){if(shouldTestNextSiblings){elems=appendNextSiblings(elems,adapter)}return Array.isArray(elems)?adapter.removeSubsets(elems):adapter.getChildren(elems)}function appendNextSiblings(elem,adapter){const elems=Array.isArray(elem)?elem.slice(0):[elem];const elemsLength=elems.length;for(let i=0;i<elemsLength;i++){const nextSiblings=getNextSiblings(elems[i],adapter);elems.push(...nextSiblings)}return elems}var selectAll=getSelectorFunc((query,elems,options)=>query===boolbase6.falseFunc||!elems||elems.length===0?[]:findAll2(query,elems,options));var selectOne=getSelectorFunc((query,elems,options)=>query===boolbase6.falseFunc||!elems||elems.length===0?null:findOne2(query,elems,options));var htmlDecodeTree=new Uint16Array("<\x00\x00\x00\x00\x00\x00EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;\uD835\uDD04ravepha;acr;d;gpon;f;\uD835\uDD38plyFunction;ingcsr;\uD835\uDC9Cign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;\uD835\uDD05pf;\uD835\uDD39eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;\uD835\uDC9Ep;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;\uD835\uDD07afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\x00\x00\x00\x00f;\uD835\uDD3B;DEot;qual;bleCDLRUVontourIntegrao\x00\x00nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\x00\x00rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\x00\x00ightVector;eeVector;ector;Bar;ight\x00eeVector;ector;Bar;ee;Arrow;ctr;\uD835\uDC9Frok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;\uD835\uDD08raveement;apcr;ty\x00\x00mallSquare;erySmallSquare;gpon;f;\uD835\uDD3Csilon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;\uD835\uDD09lled\x00\x00mallSquare;erySmallSquare;\x00\x00\x00f;\uD835\uDD3DAll;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;\uD835\uDD0A;pf;\uD835\uDD3EeaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;\uD835\uDCA2;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\x00f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\x00;egrral;section;isibleCTomma;imes;gpton;f;\uD835\uDD40a;cr;ilde;\x00cy;lcfosuiyrc;;r;\uD835\uDD0Dpf;\uD835\uDD41\x00r;\uD835\uDCA5rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;\uD835\uDD0Epf;\uD835\uDD42cr;\uD835\uDCA6JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\x00bleBracket;n\x00eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;\uD835\uDD0F;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;\uD835\uDD43erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;\uD835\uDD10nusPlus;pf;\uD835\uDD44c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;\uD835\uDD11Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;\uD835\uDCA9ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;\uD835\uDD12raveaeicr;ga;cron;pf;\uD835\uDD46enCurlyDQoubleQuote;uote;;clr;\uD835\uDCAAashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;\uD835\uDD13i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;\uD835\uDCAB;UfosOT\"r;\uD835\uDD14pf;cr;\uD835\uDCACBEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\x00bleBracket;n\x00eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;\uD835\uDD16ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\uD835\uDD4A\x00\x00t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;\uD835\uDCAEar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;\uD835\uDD17ei\x00efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;\uD835\uDD4BipleDot;ctr;\uD835\uDCAFrok;\x00\x00\x00\x00\x00\x00\x00cruter;ocir;r\x00y;ve;iyrc;blac;r;\uD835\uDD18raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;\uD835\uDD4CADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;\uD835\uDCB0ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;\uD835\uDD19pf;\uD835\uDD4Dcr;\uD835\uDCB1dash;cefosirc;dge;r;\uD835\uDD1Apf;\uD835\uDD4Ecr;\uD835\uDCB2fiosr;\uD835\uDD1B;pf;\uD835\uDD4Fcr;\uD835\uDCB3AIUacfosucy;cy;cy;cuteiyrc;;r;\uD835\uDD1Cpf;\uD835\uDD50cr;\uD835\uDCB4ml;Hacdefoscy;cute;ayron;;ot;\x00oWidta;r;pf;cr;\uD835\uDCB5\x00\x00\x00\x00\x00\x00\x00cutereve;;Ediuy;;rcte;lig;r;\uD835\uDD1Eraveepfpsym;ha;apcclr;g;\x00\x00;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;\uD835\uDD52;Eaeiop;cir;;d;s;rox;eingctyr;\uD835\uDCB6;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;\uD835\uDD1Fgcostuvwaiurc;pdptot;lus;imes;\x00\x00cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\x00\x00;;4;ck;eo;q=uiv;t;ptwxf;\uD835\uDD53;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;\uD835\uDCB7mi;m;el;bh;sub;l;etp;Ee;;q\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\x00s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;\uD835\uDD20ceiy;ck;mark;r;Ecefms;;elq;e\x00\x00rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\x00on;e;q\x00\x00a;t;;flemxente\x00;dot;nfry;\uD835\uDD54o;sr;aorr;ss;cur;\uD835\uDCB8bp;e;;e;dot;delprvwarrlr;;\x00\x00r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\x00\x00reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;\uD835\uDD21arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\x00\x00rn;op;lptuwlar;f;\uD835\uDD55;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\x00\x00rn;op;cotry;\uD835\uDCB9;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;\uD835\uDD22;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;\uD835\uDD56alsr;sl;us;i;lvon;csuviorc\x00\x00antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\x00\x00\x00\x00\x00\x00\x00llingdotsey;male;ilrlig;\x00\x00g;ig;;\uD835\uDD23lig;lig;fjaltt;ig;ns;of;\x00f;\uD835\uDD57ak;v;artint;aocs\x00\x00;;;;\x00;;\x00\x00;;5;\x00;;8;l;wn;cr;\uD835\uDCBBEabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;\uD835\uDD24;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;\uD835\uDD58cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\x00pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;\uD835\uDD25sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;\uD835\uDD59bar;cltr;\uD835\uDCBDasrok;bpull;hen\x00\x00\x00\x00\x00\x00cute;iyrc;cxy;clfr;\uD835\uDD26rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;\uD835\uDD5Aa;uestcir;\uD835\uDCBEn;Edsv;ot;;v;;ilde;\x00cy;lcfmosuiyrc;;r;\uD835\uDD27ath;pf;\uD835\uDD5B\x00r;\uD835\uDCBFrcy;kcy;acfghjosppa;v;eydil;;r;\uD835\uDD28reen;cy;cy;pf;\uD835\uDD5Ccr;\uD835\uDCC0ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\x00\x00\x00\x00\x00\x00\x00\x00\x00ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;\uD835\uDD29;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;\uD835\uDD5Dus;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;\uD835\uDCC1m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;\uD835\uDD2Ao;cdnro;acdsir;otus;bd;u;p;dpels;f;\uD835\uDD5Ectr;\uD835\uDCC2pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\x00pmp;eaeouy\x00;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;\uD835\uDD2BEest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;\uD835\uDD5F;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;\uD835\uDCC3ort\x00\x00arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00csuteiyr;c;abioslac;v;old;lig;crir;;\uD835\uDD2C\x00\x00\x00n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;\uD835\uDD60aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\x00\x00\x00\x00\x00\x00\x00\x00\x00r;ast;lle\x00\x00m;;y;rcimptnt;od;il;enk;r;\uD835\uDD2Dimo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;\uD835\uDD61nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;\uD835\uDCC5;ncsp;fiopsur;\uD835\uDD2Epf;\uD835\uDD62rime;cr;\uD835\uDCC6aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;\uD835\uDD2Faordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;\uD835\uDD63us;imes;apr;gt;olint;arachqquo;r;\uD835\uDCC7buo;rhirremes;i;efltri;luhar;;\x00\x00\x00\x00\x00\x00\x00cute;qu;Eaceinpsy;\x00;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;o\uD835\uDD30acoyrp;hycy;;rt\x00\x00iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;\uD835\uDD64adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;\uD835\uDCC8tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00get;;raeyron;dil;;lrec;r;\uD835\uDD31eiko\x00e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;o\uD835\uDD65rk;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;\uD835\uDCC9;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\x00y;ve;iyrc;abhrlac;airsht;;\uD835\uDD32raverlrlk;ct\x00\x00rn;erop;ri;alcr;gpon;f;\uD835\uDD66adhlsuownarpoonlrefighi;hlonparrows;cit\x00\x00rn;erop;ng;ri;cr;\uD835\uDCCAdirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;\uD835\uDD33trsubppf;\uD835\uDD67rotrcur;\uD835\uDCCBbpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;\uD835\uDD34pf;\uD835\uDD68;eatcr;\uD835\uDCCC\x00\x00\x00\x00\x00\x00\x00trr;\uD835\uDD35Aarr;Aarrais;dptfl;\uD835\uDD69imAarrcqr;\uD835\uDCCDptracefiosucuyte;iyrc;;nr;\uD835\uDD36cy;pf;\uD835\uDD6Acr;\uD835\uDCCEcmy;lacdefhioswcute;ayron;;ot;ettra;r;\uD835\uDD37cy;grarr;pf;\uD835\uDD6Bcr;\uD835\uDCCFjn;j;".split("").map((c)=>c.charCodeAt(0)));var xmlDecodeTree=new Uint16Array("aglq\t\x15\x18\x1B\x0F\x00\x00\x12p;os;t;t;uot;".split("").map((c)=>c.charCodeAt(0)));var _a;var decodeMap=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var fromCodePoint=(_a=String.fromCodePoint)!==null&&_a!==undefined?_a:function(codePoint){let output="";if(codePoint>65535){codePoint-=65536;output+=String.fromCharCode(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}output+=String.fromCharCode(codePoint);return output};function replaceCodePoint(codePoint){var _a2;if(codePoint>=55296&&codePoint<=57343||codePoint>1114111){return 65533}return(_a2=decodeMap.get(codePoint))!==null&&_a2!==undefined?_a2:codePoint}var CharCodes;(function(CharCodes2){CharCodes2[CharCodes2["NUM"]=35]="NUM";CharCodes2[CharCodes2["SEMI"]=59]="SEMI";CharCodes2[CharCodes2["EQUALS"]=61]="EQUALS";CharCodes2[CharCodes2["ZERO"]=48]="ZERO";CharCodes2[CharCodes2["NINE"]=57]="NINE";CharCodes2[CharCodes2["LOWER_A"]=97]="LOWER_A";CharCodes2[CharCodes2["LOWER_F"]=102]="LOWER_F";CharCodes2[CharCodes2["LOWER_X"]=120]="LOWER_X";CharCodes2[CharCodes2["LOWER_Z"]=122]="LOWER_Z";CharCodes2[CharCodes2["UPPER_A"]=65]="UPPER_A";CharCodes2[CharCodes2["UPPER_F"]=70]="UPPER_F";CharCodes2[CharCodes2["UPPER_Z"]=90]="UPPER_Z"})(CharCodes||(CharCodes={}));var TO_LOWER_BIT=32;var BinTrieFlags;(function(BinTrieFlags2){BinTrieFlags2[BinTrieFlags2["VALUE_LENGTH"]=49152]="VALUE_LENGTH";BinTrieFlags2[BinTrieFlags2["BRANCH_LENGTH"]=16256]="BRANCH_LENGTH";BinTrieFlags2[BinTrieFlags2["JUMP_TABLE"]=127]="JUMP_TABLE"})(BinTrieFlags||(BinTrieFlags={}));function isNumber(code){return code>=CharCodes.ZERO&&code<=CharCodes.NINE}function isHexadecimalCharacter(code){return code>=CharCodes.UPPER_A&&code<=CharCodes.UPPER_F||code>=CharCodes.LOWER_A&&code<=CharCodes.LOWER_F}function isAsciiAlphaNumeric(code){return code>=CharCodes.UPPER_A&&code<=CharCodes.UPPER_Z||code>=CharCodes.LOWER_A&&code<=CharCodes.LOWER_Z||isNumber(code)}function isEntityInAttributeInvalidEnd(code){return code===CharCodes.EQUALS||isAsciiAlphaNumeric(code)}var EntityDecoderState;(function(EntityDecoderState2){EntityDecoderState2[EntityDecoderState2["EntityStart"]=0]="EntityStart";EntityDecoderState2[EntityDecoderState2["NumericStart"]=1]="NumericStart";EntityDecoderState2[EntityDecoderState2["NumericDecimal"]=2]="NumericDecimal";EntityDecoderState2[EntityDecoderState2["NumericHex"]=3]="NumericHex";EntityDecoderState2[EntityDecoderState2["NamedEntity"]=4]="NamedEntity"})(EntityDecoderState||(EntityDecoderState={}));var DecodingMode;(function(DecodingMode2){DecodingMode2[DecodingMode2["Legacy"]=0]="Legacy";DecodingMode2[DecodingMode2["Strict"]=1]="Strict";DecodingMode2[DecodingMode2["Attribute"]=2]="Attribute"})(DecodingMode||(DecodingMode={}));class EntityDecoder{constructor(decodeTree,emitCodePoint,errors){this.decodeTree=decodeTree;this.emitCodePoint=emitCodePoint;this.errors=errors;this.state=EntityDecoderState.EntityStart;this.consumed=1;this.result=0;this.treeIndex=0;this.excess=1;this.decodeMode=DecodingMode.Strict}startEntity(decodeMode){this.decodeMode=decodeMode;this.state=EntityDecoderState.EntityStart;this.result=0;this.treeIndex=0;this.excess=1;this.consumed=1}write(input,offset){switch(this.state){case EntityDecoderState.EntityStart:{if(input.charCodeAt(offset)===CharCodes.NUM){this.state=EntityDecoderState.NumericStart;this.consumed+=1;return this.stateNumericStart(input,offset+1)}this.state=EntityDecoderState.NamedEntity;return this.stateNamedEntity(input,offset)}case EntityDecoderState.NumericStart:{return this.stateNumericStart(input,offset)}case EntityDecoderState.NumericDecimal:{return this.stateNumericDecimal(input,offset)}case EntityDecoderState.NumericHex:{return this.stateNumericHex(input,offset)}case EntityDecoderState.NamedEntity:{return this.stateNamedEntity(input,offset)}}}stateNumericStart(input,offset){if(offset>=input.length){return-1}if((input.charCodeAt(offset)|TO_LOWER_BIT)===CharCodes.LOWER_X){this.state=EntityDecoderState.NumericHex;this.consumed+=1;return this.stateNumericHex(input,offset+1)}this.state=EntityDecoderState.NumericDecimal;return this.stateNumericDecimal(input,offset)}addToNumericResult(input,start,end,base){if(start!==end){const digitCount=end-start;this.result=this.result*Math.pow(base,digitCount)+Number.parseInt(input.substr(start,digitCount),base);this.consumed+=digitCount}}stateNumericHex(input,offset){const startIndex=offset;while(offset<input.length){const char=input.charCodeAt(offset);if(isNumber(char)||isHexadecimalCharacter(char)){offset+=1}else{this.addToNumericResult(input,startIndex,offset,16);return this.emitNumericEntity(char,3)}}this.addToNumericResult(input,startIndex,offset,16);return-1}stateNumericDecimal(input,offset){const startIndex=offset;while(offset<input.length){const char=input.charCodeAt(offset);if(isNumber(char)){offset+=1}else{this.addToNumericResult(input,startIndex,offset,10);return this.emitNumericEntity(char,2)}}this.addToNumericResult(input,startIndex,offset,10);return-1}emitNumericEntity(lastCp,expectedLength){var _a2;if(this.consumed<=expectedLength){(_a2=this.errors)===null||_a2===undefined||_a2.absenceOfDigitsInNumericCharacterReference(this.consumed);return 0}if(lastCp===CharCodes.SEMI){this.consumed+=1}else if(this.decodeMode===DecodingMode.Strict){return 0}this.emitCodePoint(replaceCodePoint(this.result),this.consumed);if(this.errors){if(lastCp!==CharCodes.SEMI){this.errors.missingSemicolonAfterCharacterReference()}this.errors.validateNumericCharacterReference(this.result)}return this.consumed}stateNamedEntity(input,offset){const{decodeTree}=this;let current=decodeTree[this.treeIndex];let valueLength=(current&BinTrieFlags.VALUE_LENGTH)>>14;for(;offset<input.length;offset++,this.excess++){const char=input.charCodeAt(offset);this.treeIndex=determineBranch(decodeTree,current,this.treeIndex+Math.max(1,valueLength),char);if(this.treeIndex<0){return this.result===0||this.decodeMode===DecodingMode.Attribute&&(valueLength===0||isEntityInAttributeInvalidEnd(char))?0:this.emitNotTerminatedNamedEntity()}current=decodeTree[this.treeIndex];valueLength=(current&BinTrieFlags.VALUE_LENGTH)>>14;if(valueLength!==0){if(char===CharCodes.SEMI){return this.emitNamedEntityData(this.treeIndex,valueLength,this.consumed+this.excess)}if(this.decodeMode!==DecodingMode.Strict){this.result=this.treeIndex;this.consumed+=this.excess;this.excess=0}}}return-1}emitNotTerminatedNamedEntity(){var _a2;const{result,decodeTree}=this;const valueLength=(decodeTree[result]&BinTrieFlags.VALUE_LENGTH)>>14;this.emitNamedEntityData(result,valueLength,this.consumed);(_a2=this.errors)===null||_a2===undefined||_a2.missingSemicolonAfterCharacterReference();return this.consumed}emitNamedEntityData(result,valueLength,consumed){const{decodeTree}=this;this.emitCodePoint(valueLength===1?decodeTree[result]&~BinTrieFlags.VALUE_LENGTH:decodeTree[result+1],consumed);if(valueLength===3){this.emitCodePoint(decodeTree[result+2],consumed)}return consumed}end(){var _a2;switch(this.state){case EntityDecoderState.NamedEntity:{return this.result!==0&&(this.decodeMode!==DecodingMode.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0}case EntityDecoderState.NumericDecimal:{return this.emitNumericEntity(0,2)}case EntityDecoderState.NumericHex:{return this.emitNumericEntity(0,3)}case EntityDecoderState.NumericStart:{(_a2=this.errors)===null||_a2===undefined||_a2.absenceOfDigitsInNumericCharacterReference(this.consumed);return 0}case EntityDecoderState.EntityStart:{return 0}}}}function determineBranch(decodeTree,current,nodeIndex,char){const branchCount=(current&BinTrieFlags.BRANCH_LENGTH)>>7;const jumpOffset=current&BinTrieFlags.JUMP_TABLE;if(branchCount===0){return jumpOffset!==0&&char===jumpOffset?nodeIndex:-1}if(jumpOffset){const value=char-jumpOffset;return value<0||value>=branchCount?-1:decodeTree[nodeIndex+value]-1}let lo=nodeIndex;let hi=lo+branchCount-1;while(lo<=hi){const mid=lo+hi>>>1;const midValue=decodeTree[mid];if(midValue<char){lo=mid+1}else if(midValue>char){hi=mid-1}else{return decodeTree[mid+branchCount]}}return-1}var CharCodes2;(function(CharCodes3){CharCodes3[CharCodes3["Tab"]=9]="Tab";CharCodes3[CharCodes3["NewLine"]=10]="NewLine";CharCodes3[CharCodes3["FormFeed"]=12]="FormFeed";CharCodes3[CharCodes3["CarriageReturn"]=13]="CarriageReturn";CharCodes3[CharCodes3["Space"]=32]="Space";CharCodes3[CharCodes3["ExclamationMark"]=33]="ExclamationMark";CharCodes3[CharCodes3["Number"]=35]="Number";CharCodes3[CharCodes3["Amp"]=38]="Amp";CharCodes3[CharCodes3["SingleQuote"]=39]="SingleQuote";CharCodes3[CharCodes3["DoubleQuote"]=34]="DoubleQuote";CharCodes3[CharCodes3["Dash"]=45]="Dash";CharCodes3[CharCodes3["Slash"]=47]="Slash";CharCodes3[CharCodes3["Zero"]=48]="Zero";CharCodes3[CharCodes3["Nine"]=57]="Nine";CharCodes3[CharCodes3["Semi"]=59]="Semi";CharCodes3[CharCodes3["Lt"]=60]="Lt";CharCodes3[CharCodes3["Eq"]=61]="Eq";CharCodes3[CharCodes3["Gt"]=62]="Gt";CharCodes3[CharCodes3["Questionmark"]=63]="Questionmark";CharCodes3[CharCodes3["UpperA"]=65]="UpperA";CharCodes3[CharCodes3["LowerA"]=97]="LowerA";CharCodes3[CharCodes3["UpperF"]=70]="UpperF";CharCodes3[CharCodes3["LowerF"]=102]="LowerF";CharCodes3[CharCodes3["UpperZ"]=90]="UpperZ";CharCodes3[CharCodes3["LowerZ"]=122]="LowerZ";CharCodes3[CharCodes3["LowerX"]=120]="LowerX";CharCodes3[CharCodes3["OpeningSquareBracket"]=91]="OpeningSquareBracket"})(CharCodes2||(CharCodes2={}));var State;(function(State2){State2[State2["Text"]=1]="Text";State2[State2["BeforeTagName"]=2]="BeforeTagName";State2[State2["InTagName"]=3]="InTagName";State2[State2["InSelfClosingTag"]=4]="InSelfClosingTag";State2[State2["BeforeClosingTagName"]=5]="BeforeClosingTagName";State2[State2["InClosingTagName"]=6]="InClosingTagName";State2[State2["AfterClosingTagName"]=7]="AfterClosingTagName";State2[State2["BeforeAttributeName"]=8]="BeforeAttributeName";State2[State2["InAttributeName"]=9]="InAttributeName";State2[State2["AfterAttributeName"]=10]="AfterAttributeName";State2[State2["BeforeAttributeValue"]=11]="BeforeAttributeValue";State2[State2["InAttributeValueDq"]=12]="InAttributeValueDq";State2[State2["InAttributeValueSq"]=13]="InAttributeValueSq";State2[State2["InAttributeValueNq"]=14]="InAttributeValueNq";State2[State2["BeforeDeclaration"]=15]="BeforeDeclaration";State2[State2["InDeclaration"]=16]="InDeclaration";State2[State2["InProcessingInstruction"]=17]="InProcessingInstruction";State2[State2["BeforeComment"]=18]="BeforeComment";State2[State2["CDATASequence"]=19]="CDATASequence";State2[State2["InSpecialComment"]=20]="InSpecialComment";State2[State2["InCommentLike"]=21]="InCommentLike";State2[State2["BeforeSpecialS"]=22]="BeforeSpecialS";State2[State2["BeforeSpecialT"]=23]="BeforeSpecialT";State2[State2["SpecialStartSequence"]=24]="SpecialStartSequence";State2[State2["InSpecialTag"]=25]="InSpecialTag";State2[State2["InEntity"]=26]="InEntity"})(State||(State={}));function isWhitespace2(c){return c===CharCodes2.Space||c===CharCodes2.NewLine||c===CharCodes2.Tab||c===CharCodes2.FormFeed||c===CharCodes2.CarriageReturn}function isEndOfTagSection(c){return c===CharCodes2.Slash||c===CharCodes2.Gt||isWhitespace2(c)}function isASCIIAlpha(c){return c>=CharCodes2.LowerA&&c<=CharCodes2.LowerZ||c>=CharCodes2.UpperA&&c<=CharCodes2.UpperZ}var QuoteType;(function(QuoteType2){QuoteType2[QuoteType2["NoValue"]=0]="NoValue";QuoteType2[QuoteType2["Unquoted"]=1]="Unquoted";QuoteType2[QuoteType2["Single"]=2]="Single";QuoteType2[QuoteType2["Double"]=3]="Double"})(QuoteType||(QuoteType={}));var Sequences={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97]),XmpEnd:new Uint8Array([60,47,120,109,112])};class Tokenizer{constructor({xmlMode=false,decodeEntities=true},cbs){this.cbs=cbs;this.state=State.Text;this.buffer="";this.sectionStart=0;this.index=0;this.entityStart=0;this.baseState=State.Text;this.isSpecial=false;this.running=true;this.offset=0;this.currentSequence=undefined;this.sequenceIndex=0;this.xmlMode=xmlMode;this.decodeEntities=decodeEntities;this.entityDecoder=new EntityDecoder(xmlMode?xmlDecodeTree:htmlDecodeTree,(cp,consumed)=>this.emitCodePoint(cp,consumed))}reset(){this.state=State.Text;this.buffer="";this.sectionStart=0;this.index=0;this.baseState=State.Text;this.currentSequence=undefined;this.running=true;this.offset=0}write(chunk){this.offset+=this.buffer.length;this.buffer=chunk;this.parse()}end(){if(this.running)this.finish()}pause(){this.running=false}resume(){this.running=true;if(this.index<this.buffer.length+this.offset){this.parse()}}stateText(c){if(c===CharCodes2.Lt||!this.decodeEntities&&this.fastForwardTo(CharCodes2.Lt)){if(this.index>this.sectionStart){this.cbs.ontext(this.sectionStart,this.index)}this.state=State.BeforeTagName;this.sectionStart=this.index}else if(this.decodeEntities&&c===CharCodes2.Amp){this.startEntity()}}stateSpecialStartSequence(c){const isEnd=this.sequenceIndex===this.currentSequence.length;const isMatch=isEnd?isEndOfTagSection(c):(c|32)===this.currentSequence[this.sequenceIndex];if(!isMatch){this.isSpecial=false}else if(!isEnd){this.sequenceIndex++;return}this.sequenceIndex=0;this.state=State.InTagName;this.stateInTagName(c)}stateInSpecialTag(c){if(this.sequenceIndex===this.currentSequence.length){if(c===CharCodes2.Gt||isWhitespace2(c)){const endOfText=this.index-this.currentSequence.length;if(this.sectionStart<endOfText){const actualIndex=this.index;this.index=endOfText;this.cbs.ontext(this.sectionStart,endOfText);this.index=actualIndex}this.isSpecial=false;this.sectionStart=endOfText+2;this.stateInClosingTagName(c);return}this.sequenceIndex=0}if((c|32)===this.currentSequence[this.sequenceIndex]){this.sequenceIndex+=1}else if(this.sequenceIndex===0){if(this.currentSequence===Sequences.TitleEnd){if(this.decodeEntities&&c===CharCodes2.Amp){this.startEntity()}}else if(this.fastForwardTo(CharCodes2.Lt)){this.sequenceIndex=1}}else{this.sequenceIndex=Number(c===CharCodes2.Lt)}}stateCDATASequence(c){if(c===Sequences.Cdata[this.sequenceIndex]){if(++this.sequenceIndex===Sequences.Cdata.length){this.state=State.InCommentLike;this.currentSequence=Sequences.CdataEnd;this.sequenceIndex=0;this.sectionStart=this.index+1}}else{this.sequenceIndex=0;this.state=State.InDeclaration;this.stateInDeclaration(c)}}fastForwardTo(c){while(++this.index<this.buffer.length+this.offset){if(this.buffer.charCodeAt(this.index-this.offset)===c){return true}}this.index=this.buffer.length+this.offset-1;return false}stateInCommentLike(c){if(c===this.currentSequence[this.sequenceIndex]){if(++this.sequenceIndex===this.currentSequence.length){if(this.currentSequence===Sequences.CdataEnd){this.cbs.oncdata(this.sectionStart,this.index,2)}else{this.cbs.oncomment(this.sectionStart,this.index,2)}this.sequenceIndex=0;this.sectionStart=this.index+1;this.state=State.Text}}else if(this.sequenceIndex===0){if(this.fastForwardTo(this.currentSequence[0])){this.sequenceIndex=1}}else if(c!==this.currentSequence[this.sequenceIndex-1]){this.sequenceIndex=0}}isTagStartChar(c){return this.xmlMode?!isEndOfTagSection(c):isASCIIAlpha(c)}startSpecial(sequence,offset){this.isSpecial=true;this.currentSequence=sequence;this.sequenceIndex=offset;this.state=State.SpecialStartSequence}stateBeforeTagName(c){if(c===CharCodes2.ExclamationMark){this.state=State.BeforeDeclaration;this.sectionStart=this.index+1}else if(c===CharCodes2.Questionmark){this.state=State.InProcessingInstruction;this.sectionStart=this.index+1}else if(this.isTagStartChar(c)){const lower=c|32;this.sectionStart=this.index;if(this.xmlMode){this.state=State.InTagName}else if(lower===Sequences.ScriptEnd[2]){this.state=State.BeforeSpecialS}else if(lower===Sequences.TitleEnd[2]||lower===Sequences.XmpEnd[2]){this.state=State.BeforeSpecialT}else{this.state=State.InTagName}}else if(c===CharCodes2.Slash){this.state=State.BeforeClosingTagName}else{this.state=State.Text;this.stateText(c)}}stateInTagName(c){if(isEndOfTagSection(c)){this.cbs.onopentagname(this.sectionStart,this.index);this.sectionStart=-1;this.state=State.BeforeAttributeName;this.stateBeforeAttributeName(c)}}stateBeforeClosingTagName(c){if(isWhitespace2(c)){}else if(c===CharCodes2.Gt){this.state=State.Text}else{this.state=this.isTagStartChar(c)?State.InClosingTagName:State.InSpecialComment;this.sectionStart=this.index}}stateInClosingTagName(c){if(c===CharCodes2.Gt||isWhitespace2(c)){this.cbs.onclosetag(this.sectionStart,this.index);this.sectionStart=-1;this.state=State.AfterClosingTagName;this.stateAfterClosingTagName(c)}}stateAfterClosingTagName(c){if(c===CharCodes2.Gt||this.fastForwardTo(CharCodes2.Gt)){this.state=State.Text;this.sectionStart=this.index+1}}stateBeforeAttributeName(c){if(c===CharCodes2.Gt){this.cbs.onopentagend(this.index);if(this.isSpecial){this.state=State.InSpecialTag;this.sequenceIndex=0}else{this.state=State.Text}this.sectionStart=this.index+1}else if(c===CharCodes2.Slash){this.state=State.InSelfClosingTag}else if(!isWhitespace2(c)){this.state=State.InAttributeName;this.sectionStart=this.index}}stateInSelfClosingTag(c){if(c===CharCodes2.Gt){this.cbs.onselfclosingtag(this.index);this.state=State.Text;this.sectionStart=this.index+1;this.isSpecial=false}else if(!isWhitespace2(c)){this.state=State.BeforeAttributeName;this.stateBeforeAttributeName(c)}}stateInAttributeName(c){if(c===CharCodes2.Eq||isEndOfTagSection(c)){this.cbs.onattribname(this.sectionStart,this.index);this.sectionStart=this.index;this.state=State.AfterAttributeName;this.stateAfterAttributeName(c)}}stateAfterAttributeName(c){if(c===CharCodes2.Eq){this.state=State.BeforeAttributeValue}else if(c===CharCodes2.Slash||c===CharCodes2.Gt){this.cbs.onattribend(QuoteType.NoValue,this.sectionStart);this.sectionStart=-1;this.state=State.BeforeAttributeName;this.stateBeforeAttributeName(c)}else if(!isWhitespace2(c)){this.cbs.onattribend(QuoteType.NoValue,this.sectionStart);this.state=State.InAttributeName;this.sectionStart=this.index}}stateBeforeAttributeValue(c){if(c===CharCodes2.DoubleQuote){this.state=State.InAttributeValueDq;this.sectionStart=this.index+1}else if(c===CharCodes2.SingleQuote){this.state=State.InAttributeValueSq;this.sectionStart=this.index+1}else if(!isWhitespace2(c)){this.sectionStart=this.index;this.state=State.InAttributeValueNq;this.stateInAttributeValueNoQuotes(c)}}handleInAttributeValue(c,quote){if(c===quote||!this.decodeEntities&&this.fastForwardTo(quote)){this.cbs.onattribdata(this.sectionStart,this.index);this.sectionStart=-1;this.cbs.onattribend(quote===CharCodes2.DoubleQuote?QuoteType.Double:QuoteType.Single,this.index+1);this.state=State.BeforeAttributeName}else if(this.decodeEntities&&c===CharCodes2.Amp){this.startEntity()}}stateInAttributeValueDoubleQuotes(c){this.handleInAttributeValue(c,CharCodes2.DoubleQuote)}stateInAttributeValueSingleQuotes(c){this.handleInAttributeValue(c,CharCodes2.SingleQuote)}stateInAttributeValueNoQuotes(c){if(isWhitespace2(c)||c===CharCodes2.Gt){this.cbs.onattribdata(this.sectionStart,this.index);this.sectionStart=-1;this.cbs.onattribend(QuoteType.Unquoted,this.index);this.state=State.BeforeAttributeName;this.stateBeforeAttributeName(c)}else if(this.decodeEntities&&c===CharCodes2.Amp){this.startEntity()}}stateBeforeDeclaration(c){if(c===CharCodes2.OpeningSquareBracket){this.state=State.CDATASequence;this.sequenceIndex=0}else{this.state=c===CharCodes2.Dash?State.BeforeComment:State.InDeclaration}}stateInDeclaration(c){if(c===CharCodes2.Gt||this.fastForwardTo(CharCodes2.Gt)){this.cbs.ondeclaration(this.sectionStart,this.index);this.state=State.Text;this.sectionStart=this.index+1}}stateInProcessingInstruction(c){if(c===CharCodes2.Gt||this.fastForwardTo(CharCodes2.Gt)){this.cbs.onprocessinginstruction(this.sectionStart,this.index);this.state=State.Text;this.sectionStart=this.index+1}}stateBeforeComment(c){if(c===CharCodes2.Dash){this.state=State.InCommentLike;this.currentSequence=Sequences.CommentEnd;this.sequenceIndex=2;this.sectionStart=this.index+1}else{this.state=State.InDeclaration}}stateInSpecialComment(c){if(c===CharCodes2.Gt||this.fastForwardTo(CharCodes2.Gt)){this.cbs.oncomment(this.sectionStart,this.index,0);this.state=State.Text;this.sectionStart=this.index+1}}stateBeforeSpecialS(c){const lower=c|32;if(lower===Sequences.ScriptEnd[3]){this.startSpecial(Sequences.ScriptEnd,4)}else if(lower===Sequences.StyleEnd[3]){this.startSpecial(Sequences.StyleEnd,4)}else{this.state=State.InTagName;this.stateInTagName(c)}}stateBeforeSpecialT(c){const lower=c|32;switch(lower){case Sequences.TitleEnd[3]:{this.startSpecial(Sequences.TitleEnd,4);break}case Sequences.TextareaEnd[3]:{this.startSpecial(Sequences.TextareaEnd,4);break}case Sequences.XmpEnd[3]:{this.startSpecial(Sequences.XmpEnd,4);break}default:{this.state=State.InTagName;this.stateInTagName(c)}}}startEntity(){this.baseState=this.state;this.state=State.InEntity;this.entityStart=this.index;this.entityDecoder.startEntity(this.xmlMode?DecodingMode.Strict:this.baseState===State.Text||this.baseState===State.InSpecialTag?DecodingMode.Legacy:DecodingMode.Attribute)}stateInEntity(){const length=this.entityDecoder.write(this.buffer,this.index-this.offset);if(length>=0){this.state=this.baseState;if(length===0){this.index=this.entityStart}}else{this.index=this.offset+this.buffer.length-1}}cleanup(){if(this.running&&this.sectionStart!==this.index){if(this.state===State.Text||this.state===State.InSpecialTag&&this.sequenceIndex===0){this.cbs.ontext(this.sectionStart,this.index);this.sectionStart=this.index}else if(this.state===State.InAttributeValueDq||this.state===State.InAttributeValueSq||this.state===State.InAttributeValueNq){this.cbs.onattribdata(this.sectionStart,this.index);this.sectionStart=this.index}}}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){while(this.shouldContinue()){const c=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case State.Text:{this.stateText(c);break}case State.SpecialStartSequence:{this.stateSpecialStartSequence(c);break}case State.InSpecialTag:{this.stateInSpecialTag(c);break}case State.CDATASequence:{this.stateCDATASequence(c);break}case State.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(c);break}case State.InAttributeName:{this.stateInAttributeName(c);break}case State.InCommentLike:{this.stateInCommentLike(c);break}case State.InSpecialComment:{this.stateInSpecialComment(c);break}case State.BeforeAttributeName:{this.stateBeforeAttributeName(c);break}case State.InTagName:{this.stateInTagName(c);break}case State.InClosingTagName:{this.stateInClosingTagName(c);break}case State.BeforeTagName:{this.stateBeforeTagName(c);break}case State.AfterAttributeName:{this.stateAfterAttributeName(c);break}case State.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(c);break}case State.BeforeAttributeValue:{this.stateBeforeAttributeValue(c);break}case State.BeforeClosingTagName:{this.stateBeforeClosingTagName(c);break}case State.AfterClosingTagName:{this.stateAfterClosingTagName(c);break}case State.BeforeSpecialS:{this.stateBeforeSpecialS(c);break}case State.BeforeSpecialT:{this.stateBeforeSpecialT(c);break}case State.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(c);break}case State.InSelfClosingTag:{this.stateInSelfClosingTag(c);break}case State.InDeclaration:{this.stateInDeclaration(c);break}case State.BeforeDeclaration:{this.stateBeforeDeclaration(c);break}case State.BeforeComment:{this.stateBeforeComment(c);break}case State.InProcessingInstruction:{this.stateInProcessingInstruction(c);break}case State.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){if(this.state===State.InEntity){this.entityDecoder.end();this.state=this.baseState}this.handleTrailingData();this.cbs.onend()}handleTrailingData(){const endIndex=this.buffer.length+this.offset;if(this.sectionStart>=endIndex){return}if(this.state===State.InCommentLike){if(this.currentSequence===Sequences.CdataEnd){this.cbs.oncdata(this.sectionStart,endIndex,0)}else{this.cbs.oncomment(this.sectionStart,endIndex,0)}}else if(this.state===State.InTagName||this.state===State.BeforeAttributeName||this.state===State.BeforeAttributeValue||this.state===State.AfterAttributeName||this.state===State.InAttributeName||this.state===State.InAttributeValueSq||this.state===State.InAttributeValueDq||this.state===State.InAttributeValueNq||this.state===State.InClosingTagName){}else{this.cbs.ontext(this.sectionStart,endIndex)}}emitCodePoint(cp,consumed){if(this.baseState!==State.Text&&this.baseState!==State.InSpecialTag){if(this.sectionStart<this.entityStart){this.cbs.onattribdata(this.sectionStart,this.entityStart)}this.sectionStart=this.entityStart+consumed;this.index=this.sectionStart-1;this.cbs.onattribentity(cp)}else{if(this.sectionStart<this.entityStart){this.cbs.ontext(this.sectionStart,this.entityStart)}this.sectionStart=this.entityStart+consumed;this.index=this.sectionStart-1;this.cbs.ontextentity(cp,this.sectionStart)}}}var formTags=new Set(["input","option","optgroup","select","button","datalist","textarea"]);var pTag=new Set(["p"]);var tableSectionTags=new Set(["thead","tbody"]);var ddtTags=new Set(["dd","dt"]);var rtpTags=new Set(["rt","rp"]);var openImpliesClose=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",pTag],["h1",pTag],["h2",pTag],["h3",pTag],["h4",pTag],["h5",pTag],["h6",pTag],["select",formTags],["input",formTags],["output",formTags],["button",formTags],["datalist",formTags],["textarea",formTags],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",ddtTags],["dt",ddtTags],["address",pTag],["article",pTag],["aside",pTag],["blockquote",pTag],["details",pTag],["div",pTag],["dl",pTag],["fieldset",pTag],["figcaption",pTag],["figure",pTag],["footer",pTag],["form",pTag],["header",pTag],["hr",pTag],["main",pTag],["nav",pTag],["ol",pTag],["pre",pTag],["section",pTag],["table",pTag],["ul",pTag],["rt",rtpTags],["rp",rtpTags],["tbody",tableSectionTags],["tfoot",tableSectionTags]]);var voidElements=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);var foreignContextElements=new Set(["math","svg"]);var htmlIntegrationElements=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]);var reNameEnd=/\s|\//;class Parser{constructor(cbs,options={}){var _a2,_b,_c,_d,_e,_f;this.options=options;this.startIndex=0;this.endIndex=0;this.openTagStart=0;this.tagname="";this.attribname="";this.attribvalue="";this.attribs=null;this.stack=[];this.buffers=[];this.bufferOffset=0;this.writeIndex=0;this.ended=false;this.cbs=cbs!==null&&cbs!==undefined?cbs:{};this.htmlMode=!this.options.xmlMode;this.lowerCaseTagNames=(_a2=options.lowerCaseTags)!==null&&_a2!==undefined?_a2:this.htmlMode;this.lowerCaseAttributeNames=(_b=options.lowerCaseAttributeNames)!==null&&_b!==undefined?_b:this.htmlMode;this.recognizeSelfClosing=(_c=options.recognizeSelfClosing)!==null&&_c!==undefined?_c:!this.htmlMode;this.tokenizer=new((_d=options.Tokenizer)!==null&&_d!==undefined?_d:Tokenizer)(this.options,this);this.foreignContext=[!this.htmlMode];(_f=(_e=this.cbs).onparserinit)===null||_f===undefined||_f.call(_e,this)}ontext(start,endIndex){var _a2,_b;const data=this.getSlice(start,endIndex);this.endIndex=endIndex-1;(_b=(_a2=this.cbs).ontext)===null||_b===undefined||_b.call(_a2,data);this.startIndex=endIndex}ontextentity(cp,endIndex){var _a2,_b;this.endIndex=endIndex-1;(_b=(_a2=this.cbs).ontext)===null||_b===undefined||_b.call(_a2,fromCodePoint(cp));this.startIndex=endIndex}isVoidElement(name){return this.htmlMode&&voidElements.has(name)}onopentagname(start,endIndex){this.endIndex=endIndex;let name=this.getSlice(start,endIndex);if(this.lowerCaseTagNames){name=name.toLowerCase()}this.emitOpenTag(name)}emitOpenTag(name){var _a2,_b,_c,_d;this.openTagStart=this.startIndex;this.tagname=name;const impliesClose=this.htmlMode&&openImpliesClose.get(name);if(impliesClose){while(this.stack.length>0&&impliesClose.has(this.stack[0])){const element=this.stack.shift();(_b=(_a2=this.cbs).onclosetag)===null||_b===undefined||_b.call(_a2,element,true)}}if(!this.isVoidElement(name)){this.stack.unshift(name);if(this.htmlMode){if(foreignContextElements.has(name)){this.foreignContext.unshift(true)}else if(htmlIntegrationElements.has(name)){this.foreignContext.unshift(false)}}}(_d=(_c=this.cbs).onopentagname)===null||_d===undefined||_d.call(_c,name);if(this.cbs.onopentag)this.attribs={}}endOpenTag(isImplied){var _a2,_b;this.startIndex=this.openTagStart;if(this.attribs){(_b=(_a2=this.cbs).onopentag)===null||_b===undefined||_b.call(_a2,this.tagname,this.attribs,isImplied);this.attribs=null}if(this.cbs.onclosetag&&this.isVoidElement(this.tagname)){this.cbs.onclosetag(this.tagname,true)}this.tagname=""}onopentagend(endIndex){this.endIndex=endIndex;this.endOpenTag(false);this.startIndex=endIndex+1}onclosetag(start,endIndex){var _a2,_b,_c,_d,_e,_f,_g,_h;this.endIndex=endIndex;let name=this.getSlice(start,endIndex);if(this.lowerCaseTagNames){name=name.toLowerCase()}if(this.htmlMode&&(foreignContextElements.has(name)||htmlIntegrationElements.has(name))){this.foreignContext.shift()}if(!this.isVoidElement(name)){const pos=this.stack.indexOf(name);if(pos!==-1){for(let index=0;index<=pos;index++){const element=this.stack.shift();(_b=(_a2=this.cbs).onclosetag)===null||_b===undefined||_b.call(_a2,element,index!==pos)}}else if(this.htmlMode&&name==="p"){this.emitOpenTag("p");this.closeCurrentTag(true)}}else if(this.htmlMode&&name==="br"){(_d=(_c=this.cbs).onopentagname)===null||_d===undefined||_d.call(_c,"br");(_f=(_e=this.cbs).onopentag)===null||_f===undefined||_f.call(_e,"br",{},true);(_h=(_g=this.cbs).onclosetag)===null||_h===undefined||_h.call(_g,"br",false)}this.startIndex=endIndex+1}onselfclosingtag(endIndex){this.endIndex=endIndex;if(this.recognizeSelfClosing||this.foreignContext[0]){this.closeCurrentTag(false);this.startIndex=endIndex+1}else{this.onopentagend(endIndex)}}closeCurrentTag(isOpenImplied){var _a2,_b;const name=this.tagname;this.endOpenTag(isOpenImplied);if(this.stack[0]===name){(_b=(_a2=this.cbs).onclosetag)===null||_b===undefined||_b.call(_a2,name,!isOpenImplied);this.stack.shift()}}onattribname(start,endIndex){this.startIndex=start;const name=this.getSlice(start,endIndex);this.attribname=this.lowerCaseAttributeNames?name.toLowerCase():name}onattribdata(start,endIndex){this.attribvalue+=this.getSlice(start,endIndex)}onattribentity(cp){this.attribvalue+=fromCodePoint(cp)}onattribend(quote,endIndex){var _a2,_b;this.endIndex=endIndex;(_b=(_a2=this.cbs).onattribute)===null||_b===undefined||_b.call(_a2,this.attribname,this.attribvalue,quote===QuoteType.Double?'"':quote===QuoteType.Single?"'":quote===QuoteType.NoValue?undefined:null);if(this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)){this.attribs[this.attribname]=this.attribvalue}this.attribvalue=""}getInstructionName(value){const index=value.search(reNameEnd);let name=index<0?value:value.substr(0,index);if(this.lowerCaseTagNames){name=name.toLowerCase()}return name}ondeclaration(start,endIndex){this.endIndex=endIndex;const value=this.getSlice(start,endIndex);if(this.cbs.onprocessinginstruction){const name=this.getInstructionName(value);this.cbs.onprocessinginstruction(`!${name}`,`!${value}`)}this.startIndex=endIndex+1}onprocessinginstruction(start,endIndex){this.endIndex=endIndex;const value=this.getSlice(start,endIndex);if(this.cbs.onprocessinginstruction){const name=this.getInstructionName(value);this.cbs.onprocessinginstruction(`?${name}`,`?${value}`)}this.startIndex=endIndex+1}oncomment(start,endIndex,offset){var _a2,_b,_c,_d;this.endIndex=endIndex;(_b=(_a2=this.cbs).oncomment)===null||_b===undefined||_b.call(_a2,this.getSlice(start,endIndex-offset));(_d=(_c=this.cbs).oncommentend)===null||_d===undefined||_d.call(_c);this.startIndex=endIndex+1}oncdata(start,endIndex,offset){var _a2,_b,_c,_d,_e,_f,_g,_h,_j,_k;this.endIndex=endIndex;const value=this.getSlice(start,endIndex-offset);if(!this.htmlMode||this.options.recognizeCDATA){(_b=(_a2=this.cbs).oncdatastart)===null||_b===undefined||_b.call(_a2);(_d=(_c=this.cbs).ontext)===null||_d===undefined||_d.call(_c,value);(_f=(_e=this.cbs).oncdataend)===null||_f===undefined||_f.call(_e)}else{(_h=(_g=this.cbs).oncomment)===null||_h===undefined||_h.call(_g,`[CDATA[${value}]]`);(_k=(_j=this.cbs).oncommentend)===null||_k===undefined||_k.call(_j)}this.startIndex=endIndex+1}onend(){var _a2,_b;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let index=0;index<this.stack.length;index++){this.cbs.onclosetag(this.stack[index],true)}}(_b=(_a2=this.cbs).onend)===null||_b===undefined||_b.call(_a2)}reset(){var _a2,_b,_c,_d;(_b=(_a2=this.cbs).onreset)===null||_b===undefined||_b.call(_a2);this.tokenizer.reset();this.tagname="";this.attribname="";this.attribs=null;this.stack.length=0;this.startIndex=0;this.endIndex=0;(_d=(_c=this.cbs).onparserinit)===null||_d===undefined||_d.call(_c,this);this.buffers.length=0;this.foreignContext.length=0;this.foreignContext.unshift(!this.htmlMode);this.bufferOffset=0;this.writeIndex=0;this.ended=false}parseComplete(data){this.reset();this.end(data)}getSlice(start,end){while(start-this.bufferOffset>=this.buffers[0].length){this.shiftBuffer()}let slice=this.buffers[0].slice(start-this.bufferOffset,end-this.bufferOffset);while(end-this.bufferOffset>this.buffers[0].length){this.shiftBuffer();slice+=this.buffers[0].slice(0,end-this.bufferOffset)}return slice}shiftBuffer(){this.bufferOffset+=this.buffers[0].length;this.writeIndex--;this.buffers.shift()}write(chunk){var _a2,_b;if(this.ended){(_b=(_a2=this.cbs).onerror)===null||_b===undefined||_b.call(_a2,new Error(".write() after done!"));return}this.buffers.push(chunk);if(this.tokenizer.running){this.tokenizer.write(chunk);this.writeIndex++}}end(chunk){var _a2,_b;if(this.ended){(_b=(_a2=this.cbs).onerror)===null||_b===undefined||_b.call(_a2,new Error(".end() after done!"));return}if(chunk)this.write(chunk);this.ended=true;this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){this.tokenizer.resume();while(this.tokenizer.running&&this.writeIndex<this.buffers.length){this.tokenizer.write(this.buffers[this.writeIndex++])}if(this.ended)this.tokenizer.end()}parseChunk(chunk){this.write(chunk)}done(chunk){this.end(chunk)}}function parseDocument(data,options){const handler=new DomHandler(undefined,options);new Parser(handler,options).end(data);return handler.root}var HTML_UTIL;((HTML_UTIL)=>{let NODE_TYPE;((NODE_TYPE)=>{function Comment3(node2){return node2?isComment(node2):false}NODE_TYPE.Comment=Comment3;function Document2(node2){return node2?isDocument(node2):false}NODE_TYPE.Document=Document2;function Tag2(node2){return node2?isTag2(node2):false}NODE_TYPE.Tag=Tag2;function Directive2(node2){return node2?isDirective(node2):false}NODE_TYPE.Directive=Directive2;function Text3(node2){return node2?isText(node2):false}NODE_TYPE.Text=Text3;function Node2(node2){if(node2!==undefined){return NODE_TYPE.Text(node2)||NODE_TYPE.Tag(node2)||NODE_TYPE.Comment(node2)||NODE_TYPE.Directive(node2)||NODE_TYPE.Document(node2)}return false}NODE_TYPE.Node=Node2;function ChildNode(node2){if(node2!==undefined){return NODE_TYPE.Text(node2)||NODE_TYPE.Tag(node2)||NODE_TYPE.Comment(node2)||NODE_TYPE.Directive(node2)||NODE_TYPE.Document(node2)}return false}NODE_TYPE.ChildNode=ChildNode;function ParentNode(node2){if(node2!==undefined){return NODE_TYPE.Tag(node2)||NODE_TYPE.Document(node2)}return false}NODE_TYPE.ParentNode=ParentNode})(NODE_TYPE=HTML_UTIL.NODE_TYPE||={});class ClassDOMNode{$node;constructor($node){this.$node=$node}get childNodes(){if(NODE_TYPE.ParentNode(this.$node)){const childNodes=[];for(const childNode of this.$node.childNodes){if(NODE_TYPE.ChildNode(childNode)){childNodes.push(new ClassDOMNode(childNode))}}return childNodes}return[]}get name(){if(NODE_TYPE.Tag(this.$node)||NODE_TYPE.Directive(this.$node)){return this.$node.name}return}get nodeType(){return this.$node.nodeType}get parentNode(){const parentNode=this.$node.parentNode??undefined;if(NODE_TYPE.ParentNode(parentNode)){return new ClassDOMNode(parentNode)}return}get type(){return this.$node.type}}HTML_UTIL.ClassDOMNode=ClassDOMNode;function AppendChild(parentNode,newNodes){if(NODE_TYPE.ParentNode(parentNode.$node)){for(const newNode of Array.isArray(newNodes)?newNodes:[newNodes]){if(NODE_TYPE.ChildNode(newNode.$node)){appendChild(parentNode.$node,newNode.$node)}}}}HTML_UTIL.AppendChild=AppendChild;function ExtractNode(html,query,options){const node2=HTML_UTIL.QuerySelector(HTML_UTIL.ParseDocument(html,options),query);if(node2!==undefined){HTML_UTIL.RemoveNode([node2])}return node2}HTML_UTIL.ExtractNode=ExtractNode;function GetAttribute(node2,attributeName){if(NODE_TYPE.Tag(node2.$node)){return node2.$node.attribs[attributeName]??undefined}return}HTML_UTIL.GetAttribute=GetAttribute;function GetAttributeNames(node2){if(NODE_TYPE.Tag(node2.$node)){return Object.keys(node2.$node.attribs)}return[]}HTML_UTIL.GetAttributeNames=GetAttributeNames;function GetHTML(node2,options){return render(node2.$node,{emptyAttrs:options?.render_empty_string_for_empty_attribute_value,selfClosingTags:options?.use_self_closing_tags_for_empty_tags,xmlMode:options?.xml_mode,encodeEntities:options?.encode_reserved_characters_for_html,decodeEntities:options?.decode_reserved_characters_for_html})}HTML_UTIL.GetHTML=GetHTML;function GetValue(node2){if(NODE_TYPE.Text(node2.$node)||NODE_TYPE.Comment(node2.$node)||NODE_TYPE.Directive(node2.$node)){return node2.$node.nodeValue}return}HTML_UTIL.GetValue=GetValue;function HasAttribute(node2,attributeName){return HTML_UTIL.GetAttributeNames(node2).includes(attributeName)}HTML_UTIL.HasAttribute=HasAttribute;function InsertAfter(existingNode,newNodes){if(NODE_TYPE.ChildNode(existingNode.$node)){newNodes=Array.isArray(newNodes)?newNodes:[newNodes];for(let i=0;i<newNodes.length;i++){const newNode=newNodes[newNodes.length-i-1];if(NODE_TYPE.ChildNode(newNode.$node)){append(existingNode.$node,newNode.$node)}}}}HTML_UTIL.InsertAfter=InsertAfter;function InsertBefore(existingNode,newNodes){if(NODE_TYPE.ChildNode(existingNode.$node)){newNodes=Array.isArray(newNodes)?newNodes:[newNodes];for(let i=0;i<newNodes.length;i++){const newNode=newNodes[newNodes.length-i-1];if(NODE_TYPE.ChildNode(newNode.$node)){prepend(existingNode.$node,newNode.$node)}}}}HTML_UTIL.InsertBefore=InsertBefore;function IsParentOf(parentNode,node2){if(NODE_TYPE.ParentNode(parentNode.$node)){if(NODE_TYPE.ChildNode(node2.$node)){return parentNode.$node===node2.$node.parentNode}}return false}HTML_UTIL.IsParentOf=IsParentOf;function MergeDelimitedAttribute(intoNode,fromNode,attributeName,delimiter){const value_set=new Set;for(const value_string of[HTML_UTIL.GetAttribute(intoNode,attributeName),HTML_UTIL.GetAttribute(fromNode,attributeName)]){if(value_string!==undefined){for(const value of value_string.split(delimiter)){if(value.length>0){value_set.add(value)}}}}if(value_set.size>0){HTML_UTIL.SetAttribute(intoNode,attributeName,[...value_set].join(delimiter))}}HTML_UTIL.MergeDelimitedAttribute=MergeDelimitedAttribute;function ParseDocument(html,options){return new ClassDOMNode(parseDocument(html,{xmlMode:options?.xml_mode,decodeEntities:options?.decode_reserved_characters_for_html,lowerCaseTags:options?.convert_tag_names_to_lowercase,lowerCaseAttributeNames:options?.convert_attribute_names_to_lowercase,recognizeCDATA:options?.recognize_CDATA,recognizeSelfClosing:options?.recognize_self_closing_tags,withStartIndices:options?.include_source_start_indices_for_nodes,withEndIndices:options?.include_source_end_indices_for_nodes}))}HTML_UTIL.ParseDocument=ParseDocument;function QuerySelector(node2,query){const result=selectOne(query,node2.$node)??undefined;if(NODE_TYPE.ChildNode(result)){return new ClassDOMNode(result)}}HTML_UTIL.QuerySelector=QuerySelector;function QuerySelectorAll(node2,query){const list=[];const results=selectAll(query,node2.$node);for(const result of results){if(NODE_TYPE.ChildNode(result)){list.push(new ClassDOMNode(result))}}return list}HTML_UTIL.QuerySelectorAll=QuerySelectorAll;function RemoveAttribute(node2,attributeName){if(NODE_TYPE.Tag(node2.$node)){delete node2.$node.attribs[attributeName]}}HTML_UTIL.RemoveAttribute=RemoveAttribute;function RemoveChild(parentNode,existingNodes){for(const node2 of Array.isArray(existingNodes)?existingNodes:[existingNodes]){if(HTML_UTIL.IsParentOf(parentNode,node2)){removeElement(node2.$node)}}}HTML_UTIL.RemoveChild=RemoveChild;function RemoveNode(existingNodes){for(const node2 of Array.isArray(existingNodes)?existingNodes:[existingNodes]){if(NODE_TYPE.ChildNode(node2.$node)){if((node2.$node.parentNode??undefined)!==undefined){removeElement(node2.$node)}}}}HTML_UTIL.RemoveNode=RemoveNode;function ReplaceChild(parentNode,existingNode,newNodes){if(HTML_UTIL.IsParentOf(parentNode,existingNode)){HTML_UTIL.InsertAfter(existingNode,newNodes);HTML_UTIL.RemoveNode([existingNode])}}HTML_UTIL.ReplaceChild=ReplaceChild;function ReplaceNode(existingNode,newNodes){HTML_UTIL.InsertAfter(existingNode,newNodes);HTML_UTIL.RemoveNode([existingNode])}HTML_UTIL.ReplaceNode=ReplaceNode;function SetAttribute(node2,attributeName,attributeValue){if(NODE_TYPE.Tag(node2.$node)){node2.$node.attribs[attributeName]=attributeValue}}HTML_UTIL.SetAttribute=SetAttribute;function SetValue(node2,value){if(NODE_TYPE.Text(node2.$node)||NODE_TYPE.Comment(node2.$node)||NODE_TYPE.Directive(node2.$node)){node2.$node.nodeValue=value}}HTML_UTIL.SetValue=SetValue})(HTML_UTIL||={});export{HTML_UTIL};
